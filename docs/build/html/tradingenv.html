<!DOCTYPE html>

<html lang="env" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>tradingenv package &#8212; tradingenv 0.1.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=27fed22d" />
    <script src="_static/documentation_options.js?v=de76930b"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="tradingenv.broker package" href="tradingenv.broker.html" />
    <link rel="prev" title="tradingenv" href="modules.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="tradingenv-package">
<h1>tradingenv package<a class="headerlink" href="#tradingenv-package" title="Link to this heading">¶</a></h1>
<section id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Link to this heading">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="tradingenv.broker.html">tradingenv.broker package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tradingenv.broker.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="tradingenv.broker.html#module-tradingenv.broker.allocation">tradingenv.broker.allocation module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.allocation.NrContracts"><code class="docutils literal notranslate"><span class="pre">NrContracts</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.allocation.Weights"><code class="docutils literal notranslate"><span class="pre">Weights</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tradingenv.broker.html#module-tradingenv.broker.broker">tradingenv.broker.broker module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.broker.Broker"><code class="docutils literal notranslate"><span class="pre">Broker</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.broker.Broker._holdings_margins"><code class="docutils literal notranslate"><span class="pre">Broker._holdings_margins</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.broker.Broker._holdings_quantity"><code class="docutils literal notranslate"><span class="pre">Broker._holdings_quantity</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.broker.Broker.track_record"><code class="docutils literal notranslate"><span class="pre">Broker.track_record</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.broker.Broker.accrued_interest"><code class="docutils literal notranslate"><span class="pre">Broker.accrued_interest()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.broker.Broker.context"><code class="docutils literal notranslate"><span class="pre">Broker.context()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.broker.Broker.holdings_margins"><code class="docutils literal notranslate"><span class="pre">Broker.holdings_margins</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.broker.Broker.holdings_quantity"><code class="docutils literal notranslate"><span class="pre">Broker.holdings_quantity</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.broker.Broker.holdings_values"><code class="docutils literal notranslate"><span class="pre">Broker.holdings_values()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.broker.Broker.holdings_weights"><code class="docutils literal notranslate"><span class="pre">Broker.holdings_weights()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.broker.Broker.marking_to_market"><code class="docutils literal notranslate"><span class="pre">Broker.marking_to_market()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.broker.Broker.net_liquidation_value"><code class="docutils literal notranslate"><span class="pre">Broker.net_liquidation_value()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.broker.Broker.rebalance"><code class="docutils literal notranslate"><span class="pre">Broker.rebalance()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.broker.Broker.transact"><code class="docutils literal notranslate"><span class="pre">Broker.transact()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.broker.Context"><code class="docutils literal notranslate"><span class="pre">Context</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.broker.EndOfEpisodeError"><code class="docutils literal notranslate"><span class="pre">EndOfEpisodeError</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tradingenv.broker.html#module-tradingenv.broker.fees">tradingenv.broker.fees module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.fees.BrokerFees"><code class="docutils literal notranslate"><span class="pre">BrokerFees</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.fees.BrokerFees.commissions"><code class="docutils literal notranslate"><span class="pre">BrokerFees.commissions()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.fees.IBrokerFees"><code class="docutils literal notranslate"><span class="pre">IBrokerFees</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.fees.IBrokerFees.commissions"><code class="docutils literal notranslate"><span class="pre">IBrokerFees.commissions()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.fees.InteractiveBrokersFees"><code class="docutils literal notranslate"><span class="pre">InteractiveBrokersFees</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.fees.InteractiveBrokersFees.commissions"><code class="docutils literal notranslate"><span class="pre">InteractiveBrokersFees.commissions()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tradingenv.broker.html#module-tradingenv.broker.rebalancing">tradingenv.broker.rebalancing module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.rebalancing.Rebalancing"><code class="docutils literal notranslate"><span class="pre">Rebalancing</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.rebalancing.Rebalancing.make_trades"><code class="docutils literal notranslate"><span class="pre">Rebalancing.make_trades()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tradingenv.broker.html#module-tradingenv.broker.track_record">tradingenv.broker.track_record module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.track_record.TrackRecord"><code class="docutils literal notranslate"><span class="pre">TrackRecord</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.track_record.TrackRecord.cost_of_commissions"><code class="docutils literal notranslate"><span class="pre">TrackRecord.cost_of_commissions()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.track_record.TrackRecord.cost_of_spread"><code class="docutils literal notranslate"><span class="pre">TrackRecord.cost_of_spread()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.track_record.TrackRecord.fig_annual_returns"><code class="docutils literal notranslate"><span class="pre">TrackRecord.fig_annual_returns()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.track_record.TrackRecord.fig_capital_asset_pricing_model"><code class="docutils literal notranslate"><span class="pre">TrackRecord.fig_capital_asset_pricing_model()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.track_record.TrackRecord.fig_drawdown"><code class="docutils literal notranslate"><span class="pre">TrackRecord.fig_drawdown()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.track_record.TrackRecord.fig_historical_portfolio_weights_actual"><code class="docutils literal notranslate"><span class="pre">TrackRecord.fig_historical_portfolio_weights_actual()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.track_record.TrackRecord.fig_historical_portfolio_weights_diff"><code class="docutils literal notranslate"><span class="pre">TrackRecord.fig_historical_portfolio_weights_diff()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.track_record.TrackRecord.fig_historical_portfolio_weights_target"><code class="docutils literal notranslate"><span class="pre">TrackRecord.fig_historical_portfolio_weights_target()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.track_record.TrackRecord.fig_net_liquidation_value"><code class="docutils literal notranslate"><span class="pre">TrackRecord.fig_net_liquidation_value()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.track_record.TrackRecord.fig_returns_distribution"><code class="docutils literal notranslate"><span class="pre">TrackRecord.fig_returns_distribution()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.track_record.TrackRecord.fig_transaction_costs"><code class="docutils literal notranslate"><span class="pre">TrackRecord.fig_transaction_costs()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.track_record.TrackRecord.load"><code class="docutils literal notranslate"><span class="pre">TrackRecord.load()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.track_record.TrackRecord.net_liquidation_value"><code class="docutils literal notranslate"><span class="pre">TrackRecord.net_liquidation_value()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.track_record.TrackRecord.save"><code class="docutils literal notranslate"><span class="pre">TrackRecord.save()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.track_record.TrackRecord.tearsheet"><code class="docutils literal notranslate"><span class="pre">TrackRecord.tearsheet()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.track_record.TrackRecord.to_excel"><code class="docutils literal notranslate"><span class="pre">TrackRecord.to_excel()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.track_record.TrackRecord.transaction_costs"><code class="docutils literal notranslate"><span class="pre">TrackRecord.transaction_costs()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.track_record.TrackRecord.weights_actual"><code class="docutils literal notranslate"><span class="pre">TrackRecord.weights_actual()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.track_record.TrackRecord.weights_target"><code class="docutils literal notranslate"><span class="pre">TrackRecord.weights_target()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.track_record.TrackRecordComparison"><code class="docutils literal notranslate"><span class="pre">TrackRecordComparison</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.track_record.TrackRecordComparison.fig_net_liquidation_value"><code class="docutils literal notranslate"><span class="pre">TrackRecordComparison.fig_net_liquidation_value()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tradingenv.broker.html#module-tradingenv.broker.trade">tradingenv.broker.trade module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.trade.Trade"><code class="docutils literal notranslate"><span class="pre">Trade</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.trade.Trade.acq_price"><code class="docutils literal notranslate"><span class="pre">Trade.acq_price</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.trade.Trade.cost_of_cash"><code class="docutils literal notranslate"><span class="pre">Trade.cost_of_cash</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.trade.Trade.cost_of_commissions"><code class="docutils literal notranslate"><span class="pre">Trade.cost_of_commissions</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#id0"><code class="docutils literal notranslate"><span class="pre">Trade.acq_price</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.trade.Trade.ask_price"><code class="docutils literal notranslate"><span class="pre">Trade.ask_price</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.trade.Trade.bid_price"><code class="docutils literal notranslate"><span class="pre">Trade.bid_price</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.trade.Trade.contract"><code class="docutils literal notranslate"><span class="pre">Trade.contract</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#id1"><code class="docutils literal notranslate"><span class="pre">Trade.cost_of_cash</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#id2"><code class="docutils literal notranslate"><span class="pre">Trade.cost_of_commissions</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.trade.Trade.cost_of_spread"><code class="docutils literal notranslate"><span class="pre">Trade.cost_of_spread</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.trade.Trade.notional"><code class="docutils literal notranslate"><span class="pre">Trade.notional</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.trade.Trade.quantity"><code class="docutils literal notranslate"><span class="pre">Trade.quantity</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.trade.Trade.time"><code class="docutils literal notranslate"><span class="pre">Trade.time</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tradingenv.broker.html#module-tradingenv.broker">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</section>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Link to this heading">¶</a></h2>
</section>
<section id="module-tradingenv.contracts">
<span id="tradingenv-contracts-module"></span><h2>tradingenv.contracts module<a class="headerlink" href="#module-tradingenv.contracts" title="Link to this heading">¶</a></h2>
<p>The user is expected to instance these classes when instancing the action
observation_space within TradingEnv. For examples, see spaces.py and env.py.</p>
<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.contracts.AbstractContract">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.contracts.</span></span><span class="sig-name descname"><span class="pre">AbstractContract</span></span><a class="reference internal" href="_modules/tradingenv/contracts.html#AbstractContract"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.contracts.AbstractContract" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></p>
<p>Trading contract must be represented by implementation of this abstract
class, then passed to the action observation_space within the trading environment.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.contracts.AbstractContract.now">
<span class="sig-name descname"><span class="pre">now</span></span><a class="headerlink" href="#tradingenv.contracts.AbstractContract.now" title="Link to this definition">¶</a></dt>
<dd><p>Current time. This is handy for a subset of contracts such as
FutureChain or calculate nr days to expiry for derivatives. This is a
class attribute shared across all AbstractContract instances.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>datetime</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tradingenv.contracts.AbstractContract.cash_requirement">
<em class="property"><span class="k"><span class="pre">abstract</span></span><span class="w"> </span><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">cash_requirement</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><a class="headerlink" href="#tradingenv.contracts.AbstractContract.cash_requirement" title="Link to this definition">¶</a></dt>
<dd><p>A number ranging from 0 to 1 defining what (constant) proportion of
the notional value should be paid when buying the contract. This is
generally 1 for non-derivatives (e.g. ETFs, Indexes, Stocks)
and 0 for derivatives (e.g. Future).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.contracts.AbstractContract.make_events">
<span class="sig-name descname"><span class="pre">make_events</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#tradingenv.events.IEvent" title="tradingenv.events.IEvent"><span class="pre">IEvent</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/tradingenv/contracts.html#AbstractContract.make_events"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.contracts.AbstractContract.make_events" title="Link to this definition">¶</a></dt>
<dd><p>Returns a list of events (IEvent instances) to be added the
Transmitter when initializing TradingEnv. For example,
EventContractDiscontinued associated with futures contracts.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tradingenv.contracts.AbstractContract.margin_requirement">
<em class="property"><span class="k"><span class="pre">abstract</span></span><span class="w"> </span><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">margin_requirement</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><a class="headerlink" href="#tradingenv.contracts.AbstractContract.margin_requirement" title="Link to this definition">¶</a></dt>
<dd><p>A number ranging from 0 to 1 defining what (constant) proportion of
the notional value should be deposited as initial _margin when buying
or selling the contract. Note that by design we are making the
simplifying assumption that initial _margin == maintenance _margin.
This is generally 1 for non-derivatives (e.g. ETFs, Indexes, Stocks)
and &gt; 1 for derivatives (e.g. Future).</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tradingenv.contracts.AbstractContract.multiplier">
<em class="property"><span class="k"><span class="pre">abstract</span></span><span class="w"> </span><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">multiplier</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><a class="headerlink" href="#tradingenv.contracts.AbstractContract.multiplier" title="Link to this definition">¶</a></dt>
<dd><p>Contract's multiplier. This is generally 1 for non-derivatives
(e.g. ETFs, Indexes, Stocks) and &gt; 1 for derivatives (e.g. Future).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id0">
<span class="sig-name descname"><span class="pre">now</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">datetime</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">datetime.datetime(1,</span> <span class="pre">1,</span> <span class="pre">1,</span> <span class="pre">0,</span> <span class="pre">0)</span></em><a class="headerlink" href="#id0" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.contracts.AbstractContract.size">
<span class="sig-name descname"><span class="pre">size</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">price</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="reference internal" href="_modules/tradingenv/contracts.html#AbstractContract.size"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.contracts.AbstractContract.size" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>price</strong> (<em>float</em>) -- Value of one unit of the underlying asset.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Value of the underlying asset multiplier by the future's multiplier.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.contracts.AbstractContract.static_hashing">
<span class="sig-name descname"><span class="pre">static_hashing</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#tradingenv.contracts.AbstractContract" title="tradingenv.contracts.AbstractContract"><span class="pre">AbstractContract</span></a></span></span><a class="reference internal" href="_modules/tradingenv/contracts.html#AbstractContract.static_hashing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.contracts.AbstractContract.static_hashing" title="Link to this definition">¶</a></dt>
<dd><p>Subclasses of AbstractContract are not guaranteed to have static
hashing, as it may vary with time. This method
returns an instance of AbstractContract with the same hash of the
class instance calling this method, which is guaranteed to be static.
See FutureChain for more info as it is an example of AbstractContract
with dynamic hashing.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tradingenv.contracts.AbstractContract.symbol">
<em class="property"><span class="k"><span class="pre">abstract</span></span><span class="w"> </span><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">symbol</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#tradingenv.contracts.AbstractContract.symbol" title="Link to this definition">¶</a></dt>
<dd><p>Unique symbol associated with the concrete implementation.
Non-unique symbols might lead to silent bugs as symbols are used
to hash AbstractClass instances.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tradingenv.contracts.AbstractContract.symbol_short">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">symbol_short</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#tradingenv.contracts.AbstractContract.symbol_short" title="Link to this definition">¶</a></dt>
<dd><p>Symbol is guaranteed to be unique across all contracts, and in fact
it is used to hash the instance. The short symbol is not guaranteed
to be unique. Useful e.g. for futures where the same future across
different expiry dates share the same short symbol but not the same
symbol.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tradingenv.contracts.AbstractContract.underlyings">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">underlyings</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#tradingenv.contracts.AbstractContract" title="tradingenv.contracts.AbstractContract"><span class="pre">AbstractContract</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#tradingenv.contracts.AbstractContract.underlyings" title="Link to this definition">¶</a></dt>
<dd><p>Returns list of all subcontracts. This is needed when implementing
composite contract such as LeadingContract. For example for
FutureChain(ES) this would return the list of ES contracts
across all expiry dates. Note that this is not to be confused with
the underlying index e.g. Index('S&amp;P 500') for eMini S&amp;P 500.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.contracts.AbstractContract.verify">
<span class="sig-name descname"><span class="pre">verify</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mid_price</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/contracts.html#AbstractContract.verify"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.contracts.AbstractContract.verify" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.contracts.Asset">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.contracts.</span></span><span class="sig-name descname"><span class="pre">Asset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">symbol</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/contracts.html#Asset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.contracts.Asset" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tradingenv.contracts.AbstractContract" title="tradingenv.contracts.AbstractContract"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractContract</span></code></a></p>
<p>An index (e.g. S&amp;P 500).</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">index</span> <span class="o">=</span> <span class="n">Index</span><span class="p">(</span><span class="s1">&#39;S&amp;P 500&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">index</span>
<span class="go">Index(S&amp;P 500)</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.contracts.Asset.cash_requirement">
<span class="sig-name descname"><span class="pre">cash_requirement</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1.0</span></em><a class="headerlink" href="#tradingenv.contracts.Asset.cash_requirement" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.contracts.Asset.margin_requirement">
<span class="sig-name descname"><span class="pre">margin_requirement</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0.0</span></em><a class="headerlink" href="#tradingenv.contracts.Asset.margin_requirement" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.contracts.Asset.multiplier">
<span class="sig-name descname"><span class="pre">multiplier</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1.0</span></em><a class="headerlink" href="#tradingenv.contracts.Asset.multiplier" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tradingenv.contracts.Asset.symbol">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">symbol</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#tradingenv.contracts.Asset.symbol" title="Link to this definition">¶</a></dt>
<dd><p>Unique symbol associated with the concrete implementation.
Non-unique symbols might lead to silent bugs as symbols are used
to hash AbstractClass instances.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.contracts.Cash">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.contracts.</span></span><span class="sig-name descname"><span class="pre">Cash</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">symbol</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'USD'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/contracts.html#Cash"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.contracts.Cash" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tradingenv.contracts.Asset" title="tradingenv.contracts.Asset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Asset</span></code></a></p>
<p>A cash contract (e.g. USD).</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cash</span> <span class="o">=</span> <span class="n">Cash</span><span class="p">(</span><span class="s1">&#39;EUR&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cash</span>
<span class="go">Cash(EUR)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.contracts.ES">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.contracts.</span></span><span class="sig-name descname"><span class="pre">ES</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">year</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">month</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/contracts.html#ES"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.contracts.ES" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tradingenv.contracts.Future" title="tradingenv.contracts.Future"><code class="xref py py-class docutils literal notranslate"><span class="pre">Future</span></code></a></p>
<p class="rubric">Notes</p>
<p>First trading date is 1997-09-07, see [1].</p>
<p class="rubric">References</p>
<p>[1] <a class="reference external" href="https://www.cmegroup.com/media-room/historical-first-trade-dates.html#equityIndices">https://www.cmegroup.com/media-room/historical-first-trade-dates.html#equityIndices</a>
<a class="reference external" href="https://www.interactivebrokers.com/en/index.php?f=26662">https://www.interactivebrokers.com/en/index.php?f=26662</a>
<a class="reference external" href="https://www.cmegroup.com/clearing/risk-management/historical-margins.html">https://www.cmegroup.com/clearing/risk-management/historical-margins.html</a>
<a class="reference external" href="https://www.interactivebrokers.com/en/index.php?f=1567&amp;p=physical">https://www.interactivebrokers.com/en/index.php?f=1567&amp;p=physical</a>
<a class="reference external" href="https://www.tradingacademy.com/lessons/article/futures-contract-rollover">https://www.tradingacademy.com/lessons/article/futures-contract-rollover</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>year</strong> (<em>int</em>) -- Expiry year of the future contract.</p></li>
<li><p><strong>month</strong> (<em>int</em>) -- Expiry month of the future contract.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.contracts.ES.exists_since">
<span class="sig-name descname"><span class="pre">exists_since</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">datetime.datetime(1997,</span> <span class="pre">9,</span> <span class="pre">7,</span> <span class="pre">0,</span> <span class="pre">0)</span></em><a class="headerlink" href="#tradingenv.contracts.ES.exists_since" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.contracts.ES.freq">
<span class="sig-name descname"><span class="pre">freq</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'QE-DEC'</span></em><a class="headerlink" href="#tradingenv.contracts.ES.freq" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tradingenv.contracts.ES.margin_requirement">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">margin_requirement</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><a class="headerlink" href="#tradingenv.contracts.ES.margin_requirement" title="Link to this definition">¶</a></dt>
<dd><p>A number ranging from 0 to 1 defining what (constant) proportion of
the notional value should be deposited as initial _margin when buying
or selling the contract. Note that by design we are making the
simplifying assumption that initial _margin == maintenance _margin.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.contracts.ES.multiplier">
<span class="sig-name descname"><span class="pre">multiplier</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">50.0</span></em><a class="headerlink" href="#tradingenv.contracts.ES.multiplier" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.contracts.ETF">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.contracts.</span></span><span class="sig-name descname"><span class="pre">ETF</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">symbol</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/contracts.html#ETF"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.contracts.ETF" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tradingenv.contracts.Asset" title="tradingenv.contracts.Asset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Asset</span></code></a></p>
<p>An ETF contract (e.g. SPY).</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">etf</span> <span class="o">=</span> <span class="n">ETF</span><span class="p">(</span><span class="s1">&#39;SPY&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">etf</span>
<span class="go">ETF(SPY)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.contracts.Future">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.contracts.</span></span><span class="sig-name descname"><span class="pre">Future</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">year</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">month</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/contracts.html#Future"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.contracts.Future" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tradingenv.contracts.AbstractContract" title="tradingenv.contracts.AbstractContract"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractContract</span></code></a></p>
<p>A future contract (e.g. ES, ZN)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>year</strong> (<em>int</em>) -- Expiry year of the future contract.</p></li>
<li><p><strong>month</strong> (<em>int</em>) -- Expiry month of the future contract.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.contracts.Future.cash_requirement">
<span class="sig-name descname"><span class="pre">cash_requirement</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0.0</span></em><a class="headerlink" href="#tradingenv.contracts.Future.cash_requirement" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.contracts.Future.exists_since">
<span class="sig-name descname"><span class="pre">exists_since</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">datetime.datetime(2000,</span> <span class="pre">1,</span> <span class="pre">1,</span> <span class="pre">0,</span> <span class="pre">0)</span></em><a class="headerlink" href="#tradingenv.contracts.Future.exists_since" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.contracts.Future.exists_until">
<span class="sig-name descname"><span class="pre">exists_until</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">datetime.date(2026,</span> <span class="pre">8,</span> <span class="pre">23)</span></em><a class="headerlink" href="#tradingenv.contracts.Future.exists_until" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tradingenv.contracts.Future.freq">
<em class="property"><span class="k"><span class="pre">abstract</span></span><span class="w"> </span><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">freq</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#tradingenv.contracts.Future.freq" title="Link to this definition">¶</a></dt>
<dd><p>Returns frequency of the contracts, e.g. QE-DEC for ES, M for VX.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.contracts.Future.lifespan">
<span class="sig-name descname"><span class="pre">lifespan</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="reference internal" href="_modules/tradingenv/contracts.html#Future.lifespan"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.contracts.Future.lifespan" title="Link to this definition">¶</a></dt>
<dd><p>Returns the number of trading days left between now and the expiry
date.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.contracts.Future.make_events">
<span class="sig-name descname"><span class="pre">make_events</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#tradingenv.events.IEvent" title="tradingenv.events.IEvent"><span class="pre">IEvent</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/tradingenv/contracts.html#Future.make_events"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.contracts.Future.make_events" title="Link to this definition">¶</a></dt>
<dd><p>Returns an event run when the contract will expire thus becoming
no longer investable.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tradingenv.contracts.Future.margin_requirement">
<em class="property"><span class="k"><span class="pre">abstract</span></span><span class="w"> </span><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">margin_requirement</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><a class="headerlink" href="#tradingenv.contracts.Future.margin_requirement" title="Link to this definition">¶</a></dt>
<dd><p>A number ranging from 0 to 1 defining what (constant) proportion of
the notional value should be deposited as initial _margin when buying
or selling the contract. Note that by design we are making the
simplifying assumption that initial _margin == maintenance _margin.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.contracts.Future.month_codes">
<span class="sig-name descname"><span class="pre">month_codes</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{1:</span> <span class="pre">'F',</span> <span class="pre">2:</span> <span class="pre">'G',</span> <span class="pre">3:</span> <span class="pre">'H',</span> <span class="pre">4:</span> <span class="pre">'J',</span> <span class="pre">5:</span> <span class="pre">'K',</span> <span class="pre">6:</span> <span class="pre">'M',</span> <span class="pre">7:</span> <span class="pre">'N',</span> <span class="pre">8:</span> <span class="pre">'Q',</span> <span class="pre">9:</span> <span class="pre">'U',</span> <span class="pre">10:</span> <span class="pre">'V',</span> <span class="pre">11:</span> <span class="pre">'X',</span> <span class="pre">12:</span> <span class="pre">'Z'}</span></em><a class="headerlink" href="#tradingenv.contracts.Future.month_codes" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tradingenv.contracts.Future.symbol">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">symbol</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#tradingenv.contracts.Future.symbol" title="Link to this definition">¶</a></dt>
<dd><p>Long symbol of the future contract, e.g. 'ESU19' for the ES contract
expiring in</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tradingenv.contracts.Future.symbol_short">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">symbol_short</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#tradingenv.contracts.Future.symbol_short" title="Link to this definition">¶</a></dt>
<dd><p>Symbol is guaranteed to be unique across all contracts, and in fact
it is used to hash the instance. The short symbol is not guaranteed
to be unique. Useful e.g. for futures where the same future across
different expiry dates share the same short symbol but not the same
symbol.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.contracts.FutureChain">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.contracts.</span></span><span class="sig-name descname"><span class="pre">FutureChain</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">future_cls</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#tradingenv.contracts.Future" title="tradingenv.contracts.Future"><span class="pre">Future</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">datetime</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">datetime</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contracts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#tradingenv.contracts.Future" title="tradingenv.contracts.Future"><span class="pre">Future</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">month</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/contracts.html#FutureChain"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.contracts.FutureChain" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tradingenv.contracts.AbstractContract" title="tradingenv.contracts.AbstractContract"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractContract</span></code></a></p>
<p>Composition of Future contracts, where the only investable contract is
the one associated with the leading month. You must have a very good
reason for NOT using this class when running futures trading strategies.
Thanks to this class, you don't have to work with continuous futures data,
you can just use the chain of uncombined futures contracts across all
expires dates of interest.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>future_cls</strong> -- A subclass of Feature (e.g. ES, ZN, VX). Full list of available
futures can be found in futures.py or provide your own
implementation.</p></li>
<li><p><strong>start</strong> -- Start period of the first available futures contract, passed to
pandas.date_range.</p></li>
<li><p><strong>end</strong> -- Last period of the first available futures contract, passed to
pandas.date_range.</p></li>
<li><p><strong>contracts</strong> -- A sequence of Future instances which will be represented by this
single class. If you pass this argument, there is no need to also
pass 'future_cls', 'start' or 'end' as they will be deduced.</p></li>
<li><p><strong>month</strong> -- 0 by default, meaning that the preferred feature in the term
structure is the one with the shorted expiry date (i.e. M1). If
1, then the second expiration date will be preferred etc.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">tradingenv.contracts</span><span class="w"> </span><span class="kn">import</span> <span class="n">ES</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">future</span> <span class="o">=</span> <span class="n">FutureChain</span><span class="p">(</span><span class="n">ES</span><span class="p">,</span> <span class="s1">&#39;2018-03&#39;</span><span class="p">,</span> <span class="s1">&#39;2018-12&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">future</span><span class="o">.</span><span class="n">lead_contract</span><span class="p">(</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="go">ES(ESM18)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">future</span> <span class="o">=</span> <span class="n">FutureChain</span><span class="p">(</span><span class="n">ES</span><span class="p">,</span> <span class="s1">&#39;2018-03&#39;</span><span class="p">,</span> <span class="s1">&#39;2018-12&#39;</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">future</span><span class="o">.</span><span class="n">lead_contract</span><span class="p">(</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="go">ES(ESU18)</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.contracts.FutureChain.cash_requirement">
<span class="sig-name descname"><span class="pre">cash_requirement</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0.0</span></em><a class="headerlink" href="#tradingenv.contracts.FutureChain.cash_requirement" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.contracts.FutureChain.lead_contract">
<span class="sig-name descname"><span class="pre">lead_contract</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">now</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">datetime</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">month</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#tradingenv.contracts.Future" title="tradingenv.contracts.Future"><span class="pre">Future</span></a></span></span><a class="reference internal" href="_modules/tradingenv/contracts.html#FutureChain.lead_contract"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.contracts.FutureChain.lead_contract" title="Link to this definition">¶</a></dt>
<dd><p>Use self.now to identify the lead future contract</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.contracts.FutureChain.lifespan">
<span class="sig-name descname"><span class="pre">lifespan</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="reference internal" href="_modules/tradingenv/contracts.html#FutureChain.lifespan"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.contracts.FutureChain.lifespan" title="Link to this definition">¶</a></dt>
<dd><p>Returns the number of trading days left between now and the expiry
date of the leading future contract.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.contracts.FutureChain.make_events">
<span class="sig-name descname"><span class="pre">make_events</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#tradingenv.events.IEvent" title="tradingenv.events.IEvent"><span class="pre">IEvent</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/tradingenv/contracts.html#FutureChain.make_events"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.contracts.FutureChain.make_events" title="Link to this definition">¶</a></dt>
<dd><p>Returns list of EventContractDiscontinued associated with every
future contract belonging to the specified period when instancing this
class.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tradingenv.contracts.FutureChain.margin_requirement">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">margin_requirement</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><a class="headerlink" href="#tradingenv.contracts.FutureChain.margin_requirement" title="Link to this definition">¶</a></dt>
<dd><p>A number ranging from 0 to 1 defining what (constant) proportion of
the notional value should be deposited as initial _margin when buying
or selling the contract. Note that by design we are making the
simplifying assumption that initial _margin == maintenance _margin.
This is generally 1 for non-derivatives (e.g. ETFs, Indexes, Stocks)
and &gt; 1 for derivatives (e.g. Future).</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tradingenv.contracts.FutureChain.multiplier">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">multiplier</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><a class="headerlink" href="#tradingenv.contracts.FutureChain.multiplier" title="Link to this definition">¶</a></dt>
<dd><p>Multiplier of the future contract.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.contracts.FutureChain.static_hashing">
<span class="sig-name descname"><span class="pre">static_hashing</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#tradingenv.contracts.AbstractContract" title="tradingenv.contracts.AbstractContract"><span class="pre">AbstractContract</span></a></span></span><a class="reference internal" href="_modules/tradingenv/contracts.html#FutureChain.static_hashing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.contracts.FutureChain.static_hashing" title="Link to this definition">¶</a></dt>
<dd><p>The hash of this class instance varies with the lead contract, which
varies with time. This method returns the future instance associated
with the current time and static hashing.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tradingenv.contracts.FutureChain.symbol">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">symbol</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#tradingenv.contracts.FutureChain.symbol" title="Link to this definition">¶</a></dt>
<dd><p>Long symbol of the current leading contract from the current time
(i.e. FutureChain.now). For example, in 2019 Oct, the leading ES
contract symbol is 'ESZ19'.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tradingenv.contracts.FutureChain.symbol_short">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">symbol_short</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#tradingenv.contracts.FutureChain.symbol_short" title="Link to this definition">¶</a></dt>
<dd><p>Symbol is guaranteed to be unique across all contracts, and in fact
it is used to hash the instance. The short symbol is not guaranteed
to be unique. Useful e.g. for futures where the same future across
different expiry dates share the same short symbol but not the same
symbol.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tradingenv.contracts.FutureChain.underlyings">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">underlyings</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#tradingenv.contracts.AbstractContract" title="tradingenv.contracts.AbstractContract"><span class="pre">AbstractContract</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#tradingenv.contracts.FutureChain.underlyings" title="Link to this definition">¶</a></dt>
<dd><p>Returns list of all subcontracts. This is needed when implementing
composite contract such as LeadingContract. For example for
FutureChain(ES) this would return the list of ES contracts
across all expiry dates. Note that this is not to be confused with
the underlying index e.g. Index('S&amp;P 500') for eMini S&amp;P 500.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.contracts.Index">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.contracts.</span></span><span class="sig-name descname"><span class="pre">Index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">symbol</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/contracts.html#Index"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.contracts.Index" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tradingenv.contracts.Asset" title="tradingenv.contracts.Asset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Asset</span></code></a></p>
<p>An ETF contract (e.g. SPY).</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">etf</span> <span class="o">=</span> <span class="n">Index</span><span class="p">(</span><span class="s1">&#39;SPY&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">etf</span>
<span class="go">Index(SPY)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.contracts.NK">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.contracts.</span></span><span class="sig-name descname"><span class="pre">NK</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">year</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">month</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/contracts.html#NK"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.contracts.NK" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tradingenv.contracts.Future" title="tradingenv.contracts.Future"><code class="xref py py-class docutils literal notranslate"><span class="pre">Future</span></code></a></p>
<p class="rubric">References</p>
<p><a class="reference external" href="https://www.cmegroup.com/trading/equity-index/international-index/nikkei-225-dollar_contract_specifications.html">https://www.cmegroup.com/trading/equity-index/international-index/nikkei-225-dollar_contract_specifications.html</a>
<a class="reference external" href="https://misc.interactivebrokers.com/cstools/contract_info/v3.10/index.php?action=Conid%20Info&amp;wlId=IB&amp;conid=345561869&amp;lang=en">https://misc.interactivebrokers.com/cstools/contract_info/v3.10/index.php?action=Conid%20Info&amp;wlId=IB&amp;conid=345561869&amp;lang=en</a>
<a class="reference external" href="https://www.cmegroup.com/trading/equity-index/nikkei-225-futures-and-options.html">https://www.cmegroup.com/trading/equity-index/nikkei-225-futures-and-options.html</a>
<a class="reference external" href="https://www.cmegroup.com/trading/equity-index/international-index/nikkei-225-dollar_contract_specifications.html">https://www.cmegroup.com/trading/equity-index/international-index/nikkei-225-dollar_contract_specifications.html</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>year</strong> (<em>int</em>) -- Expiry year of the future contract.</p></li>
<li><p><strong>month</strong> (<em>int</em>) -- Expiry month of the future contract.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.contracts.NK.exists_since">
<span class="sig-name descname"><span class="pre">exists_since</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">datetime.datetime(1990,</span> <span class="pre">11,</span> <span class="pre">8,</span> <span class="pre">0,</span> <span class="pre">0)</span></em><a class="headerlink" href="#tradingenv.contracts.NK.exists_since" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.contracts.NK.freq">
<span class="sig-name descname"><span class="pre">freq</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'QE-DEC'</span></em><a class="headerlink" href="#tradingenv.contracts.NK.freq" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tradingenv.contracts.NK.margin_requirement">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">margin_requirement</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><a class="headerlink" href="#tradingenv.contracts.NK.margin_requirement" title="Link to this definition">¶</a></dt>
<dd><p>Trading terminates on business day before the 2nd friday of the
contract month.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.contracts.NK.multiplier">
<span class="sig-name descname"><span class="pre">multiplier</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">5.0</span></em><a class="headerlink" href="#tradingenv.contracts.NK.multiplier" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.contracts.Rate">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.contracts.</span></span><span class="sig-name descname"><span class="pre">Rate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">symbol</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/contracts.html#Rate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.contracts.Rate" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tradingenv.contracts.AbstractContract" title="tradingenv.contracts.AbstractContract"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractContract</span></code></a></p>
<p>An rate (e.g. FED Funds rate).</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rate</span> <span class="o">=</span> <span class="n">Rate</span><span class="p">(</span><span class="s1">&#39;FED funds rate&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rate</span>
<span class="go">Rate(FED funds rate)</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.contracts.Rate.cash_requirement">
<span class="sig-name descname"><span class="pre">cash_requirement</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1.0</span></em><a class="headerlink" href="#tradingenv.contracts.Rate.cash_requirement" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.contracts.Rate.margin_requirement">
<span class="sig-name descname"><span class="pre">margin_requirement</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0.0</span></em><a class="headerlink" href="#tradingenv.contracts.Rate.margin_requirement" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.contracts.Rate.multiplier">
<span class="sig-name descname"><span class="pre">multiplier</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1.0</span></em><a class="headerlink" href="#tradingenv.contracts.Rate.multiplier" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tradingenv.contracts.Rate.symbol">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">symbol</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#tradingenv.contracts.Rate.symbol" title="Link to this definition">¶</a></dt>
<dd><p>Unique symbol associated with the concrete implementation.
Non-unique symbols might lead to silent bugs as symbols are used
to hash AbstractClass instances.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.contracts.Rate.verify">
<span class="sig-name descname"><span class="pre">verify</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mid_price</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/contracts.html#Rate.verify"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.contracts.Rate.verify" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.contracts.Stock">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.contracts.</span></span><span class="sig-name descname"><span class="pre">Stock</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">symbol</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/contracts.html#Stock"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.contracts.Stock" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tradingenv.contracts.Asset" title="tradingenv.contracts.Asset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Asset</span></code></a></p>
<p>A stock (e.g. Miscrosoft).</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">stock</span> <span class="o">=</span> <span class="n">Stock</span><span class="p">(</span><span class="s1">&#39;MSFT&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stock</span>
<span class="go">Stock(MSFT)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.contracts.VX">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.contracts.</span></span><span class="sig-name descname"><span class="pre">VX</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">year</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">month</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/contracts.html#VX"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.contracts.VX" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tradingenv.contracts.Future" title="tradingenv.contracts.Future"><code class="xref py py-class docutils literal notranslate"><span class="pre">Future</span></code></a></p>
<p class="rubric">References</p>
<p>[1] <a class="reference external" href="https://www.cmegroup.com/media-room/historical-first-trade-dates.html#equityIndices">https://www.cmegroup.com/media-room/historical-first-trade-dates.html#equityIndices</a>
<a class="reference external" href="https://www.interactivebrokers.com/en/index.php?f=2222&amp;exch=cfe&amp;showcategories=FUTGRP#productbuffer">https://www.interactivebrokers.com/en/index.php?f=2222&amp;exch=cfe&amp;showcategories=FUTGRP#productbuffer</a>
<a class="reference external" href="file:///home/federico/Downloads/Trading_VIX_Futures_Options.pdf">file:///home/federico/Downloads/Trading_VIX_Futures_Options.pdf</a>
<a class="reference external" href="http://www.cboe.com/micro/vix/pdf/VIX%20fact%20sheet%202019.pdf">http://www.cboe.com/micro/vix/pdf/VIX%20fact%20sheet%202019.pdf</a>
<a class="reference external" href="http://cfe.cboe.com/cfe-products/vx-cboe-volatility-index-vix-futures/contract-specifications">http://cfe.cboe.com/cfe-products/vx-cboe-volatility-index-vix-futures/contract-specifications</a>
<a class="reference external" href="https://www.cboe.com/ms/vix-futures-specsheet.pdf">https://www.cboe.com/ms/vix-futures-specsheet.pdf</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>year</strong> (<em>int</em>) -- Expiry year of the future contract.</p></li>
<li><p><strong>month</strong> (<em>int</em>) -- Expiry month of the future contract.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.contracts.VX.exists_since">
<span class="sig-name descname"><span class="pre">exists_since</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">datetime.datetime(2004,</span> <span class="pre">3,</span> <span class="pre">26,</span> <span class="pre">0,</span> <span class="pre">0)</span></em><a class="headerlink" href="#tradingenv.contracts.VX.exists_since" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.contracts.VX.freq">
<span class="sig-name descname"><span class="pre">freq</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'M'</span></em><a class="headerlink" href="#tradingenv.contracts.VX.freq" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tradingenv.contracts.VX.margin_requirement">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">margin_requirement</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><a class="headerlink" href="#tradingenv.contracts.VX.margin_requirement" title="Link to this definition">¶</a></dt>
<dd><p>A number ranging from 0 to 1 defining what (constant) proportion of
the notional value should be deposited as initial _margin when buying
or selling the contract. Note that by design we are making the
simplifying assumption that initial _margin == maintenance _margin.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.contracts.VX.multiplier">
<span class="sig-name descname"><span class="pre">multiplier</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1000.0</span></em><a class="headerlink" href="#tradingenv.contracts.VX.multiplier" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.contracts.ZB">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.contracts.</span></span><span class="sig-name descname"><span class="pre">ZB</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">year</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">month</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/contracts.html#ZB"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.contracts.ZB" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">_Treasury</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>year</strong> (<em>int</em>) -- Expiry year of the future contract.</p></li>
<li><p><strong>month</strong> (<em>int</em>) -- Expiry month of the future contract.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.contracts.ZB.margin_requirement">
<span class="sig-name descname"><span class="pre">margin_requirement</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0.05</span></em><a class="headerlink" href="#tradingenv.contracts.ZB.margin_requirement" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.contracts.ZB.multiplier">
<span class="sig-name descname"><span class="pre">multiplier</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1000</span></em><a class="headerlink" href="#tradingenv.contracts.ZB.multiplier" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.contracts.ZF">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.contracts.</span></span><span class="sig-name descname"><span class="pre">ZF</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">year</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">month</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/contracts.html#ZF"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.contracts.ZF" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">_Treasury</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>year</strong> (<em>int</em>) -- Expiry year of the future contract.</p></li>
<li><p><strong>month</strong> (<em>int</em>) -- Expiry month of the future contract.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.contracts.ZF.margin_requirement">
<span class="sig-name descname"><span class="pre">margin_requirement</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0.02</span></em><a class="headerlink" href="#tradingenv.contracts.ZF.margin_requirement" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.contracts.ZF.multiplier">
<span class="sig-name descname"><span class="pre">multiplier</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1000</span></em><a class="headerlink" href="#tradingenv.contracts.ZF.multiplier" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.contracts.ZN">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.contracts.</span></span><span class="sig-name descname"><span class="pre">ZN</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">year</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">month</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/contracts.html#ZN"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.contracts.ZN" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">_Treasury</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>year</strong> (<em>int</em>) -- Expiry year of the future contract.</p></li>
<li><p><strong>month</strong> (<em>int</em>) -- Expiry month of the future contract.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.contracts.ZN.margin_requirement">
<span class="sig-name descname"><span class="pre">margin_requirement</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0.03</span></em><a class="headerlink" href="#tradingenv.contracts.ZN.margin_requirement" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.contracts.ZN.multiplier">
<span class="sig-name descname"><span class="pre">multiplier</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1000</span></em><a class="headerlink" href="#tradingenv.contracts.ZN.multiplier" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.contracts.ZQ">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.contracts.</span></span><span class="sig-name descname"><span class="pre">ZQ</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">year</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">month</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/contracts.html#ZQ"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.contracts.ZQ" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">_Treasury</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>year</strong> (<em>int</em>) -- Expiry year of the future contract.</p></li>
<li><p><strong>month</strong> (<em>int</em>) -- Expiry month of the future contract.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.contracts.ZQ.margin_requirement">
<span class="sig-name descname"><span class="pre">margin_requirement</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0.004</span></em><a class="headerlink" href="#tradingenv.contracts.ZQ.margin_requirement" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.contracts.ZQ.multiplier">
<span class="sig-name descname"><span class="pre">multiplier</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">4167</span></em><a class="headerlink" href="#tradingenv.contracts.ZQ.multiplier" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.contracts.ZT">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.contracts.</span></span><span class="sig-name descname"><span class="pre">ZT</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">year</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">month</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/contracts.html#ZT"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.contracts.ZT" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">_Treasury</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>year</strong> (<em>int</em>) -- Expiry year of the future contract.</p></li>
<li><p><strong>month</strong> (<em>int</em>) -- Expiry month of the future contract.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.contracts.ZT.margin_requirement">
<span class="sig-name descname"><span class="pre">margin_requirement</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0.02</span></em><a class="headerlink" href="#tradingenv.contracts.ZT.margin_requirement" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.contracts.ZT.multiplier">
<span class="sig-name descname"><span class="pre">multiplier</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2000</span></em><a class="headerlink" href="#tradingenv.contracts.ZT.multiplier" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-tradingenv.env">
<span id="tradingenv-env-module"></span><h2>tradingenv.env module<a class="headerlink" href="#module-tradingenv.env" title="Link to this heading">¶</a></h2>
<p>Create a new <cite>Mock</cite> object. <cite>Mock</cite> takes several optional arguments
that specify the behaviour of the Mock object:</p>
<ul>
<li><p><cite>spec</cite>: This can be either a list of strings or an existing object (a
class or instance) that acts as the specification for the mock object. If
you pass in an object then a list of strings is formed by calling dir on
the object (excluding unsupported magic attributes and methods). Accessing
any attribute not in this list will raise an <cite>AttributeError</cite>.</p>
<p>If <cite>spec</cite> is an object (rather than a list of strings) then
<cite>mock.__class__</cite> returns the class of the spec object. This allows mocks
to pass <cite>isinstance</cite> tests.</p>
</li>
<li><p><cite>spec_set</cite>: A stricter variant of <cite>spec</cite>. If used, attempting to <em>set</em>
or get an attribute on the mock that isn't on the object passed as
<cite>spec_set</cite> will raise an <cite>AttributeError</cite>.</p></li>
<li><p><cite>side_effect</cite>: A function to be called whenever the Mock is called. See
the <cite>side_effect</cite> attribute. Useful for raising exceptions or
dynamically changing return values. The function is called with the same
arguments as the mock, and unless it returns <cite>DEFAULT</cite>, the return
value of this function is used as the return value.</p>
<p>If <cite>side_effect</cite> is an iterable then each call to the mock will return
the next value from the iterable. If any of the members of the iterable
are exceptions they will be raised instead of returned.</p>
</li>
<li><p><cite>return_value</cite>: The value returned when the mock is called. By default
this is a new Mock (created on first access). See the
<cite>return_value</cite> attribute.</p></li>
<li><p><cite>unsafe</cite>: By default, accessing any attribute whose name starts with
<em>assert</em>, <em>assret</em>, <em>asert</em>, <em>aseert</em>, or <em>assrt</em> raises an AttributeError.
Additionally, an AttributeError is raised when accessing
attributes that match the name of an assertion method without the prefix
<cite>assert_</cite>, e.g. accessing <cite>called_once</cite> instead of <cite>assert_called_once</cite>.
Passing <cite>unsafe=True</cite> will allow access to these attributes.</p></li>
<li><p><cite>wraps</cite>: Item for the mock object to wrap. If <cite>wraps</cite> is not None then
calling the Mock will pass the call through to the wrapped object
(returning the real result). Attribute access on the mock will return a
Mock object that wraps the corresponding attribute of the wrapped object
(so attempting to access an attribute that doesn't exist will raise an
<cite>AttributeError</cite>).</p>
<p>If the mock has an explicit <cite>return_value</cite> set then calls are not passed
to the wrapped object and the <cite>return_value</cite> is returned instead.</p>
</li>
<li><p><cite>name</cite>: If the mock has a name then it will be used in the repr of the
mock. This can be useful for debugging. The name is propagated to child
mocks.</p></li>
</ul>
<p>Mocks can also be called with arbitrary keyword arguments. These will be
used to set attributes on the mock after it is created.</p>
</section>
<section id="module-tradingenv.events">
<span id="tradingenv-events-module"></span><h2>tradingenv.events module<a class="headerlink" href="#module-tradingenv.events" title="Link to this heading">¶</a></h2>
<p>TradingEnv is an even-driven market simulator. All custom events must
inherit the class IEvent.</p>
<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.events.EventContractDiscontinued">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.events.</span></span><span class="sig-name descname"><span class="pre">EventContractDiscontinued</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">datetime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contract</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#tradingenv.contracts.AbstractContract" title="tradingenv.contracts.AbstractContract"><span class="pre">AbstractContract</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/events.html#EventContractDiscontinued"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.events.EventContractDiscontinued" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tradingenv.events.IEvent" title="tradingenv.events.IEvent"><code class="xref py py-class docutils literal notranslate"><span class="pre">IEvent</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.events.EventDone">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.events.</span></span><span class="sig-name descname"><span class="pre">EventDone</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">datetime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">broker</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.broker.Broker" title="tradingenv.broker.broker.Broker"><span class="pre">Broker</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/events.html#EventDone"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.events.EventDone" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tradingenv.events.IEvent" title="tradingenv.events.IEvent"><code class="xref py py-class docutils literal notranslate"><span class="pre">IEvent</span></code></a></p>
<p>IEvent signaling that TradingEnv.step has finished to run.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.events.EventNBBO">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.events.</span></span><span class="sig-name descname"><span class="pre">EventNBBO</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time:</span> <span class="pre">~datetime.datetime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contract:</span> <span class="pre">~tradingenv.contracts.AbstractContract</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bid_price:</span> <span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ask_price:</span> <span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bid_size:</span> <span class="pre">float</span> <span class="pre">=</span> <span class="pre">&lt;Mock</span> <span class="pre">name='mock.inf'</span> <span class="pre">id='129693758505472'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ask_size:</span> <span class="pre">float</span> <span class="pre">=</span> <span class="pre">&lt;Mock</span> <span class="pre">name='mock.inf'</span> <span class="pre">id='129693758505472'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/events.html#EventNBBO"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.events.EventNBBO" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tradingenv.events.IEvent" title="tradingenv.events.IEvent"><code class="xref py py-class docutils literal notranslate"><span class="pre">IEvent</span></code></a></p>
<p>(Synchronous) National Best Bid and Offer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>contract</strong> (<em>'tradingenv.contracts.AbstractContract'</em>) -- Contract ID. Generally a string (e.g. 'S&amp;P 500') but could be a
whatever hashable object.</p></li>
<li><p><strong>bid_price</strong> (<em>float</em>) -- Bid transaction_price now.</p></li>
<li><p><strong>ask_price</strong> (<em>float</em>) -- Ask transaction_price now.</p></li>
<li><p><strong>bid_size</strong> (<em>float</em>) -- Bid size now (top of the book).</p></li>
<li><p><strong>ask_size</strong> (<em>float</em>) -- Ask size now (top of the book).</p></li>
<li><p><strong>time</strong> (<em>datetime</em>) -- Timestamp associated with the NBBO. If not provided, the time will
be assumed to be the current UTC time.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.events.EventNBBO.ask_price">
<span class="sig-name descname"><span class="pre">ask_price</span></span><a class="headerlink" href="#tradingenv.events.EventNBBO.ask_price" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.events.EventNBBO.ask_size">
<span class="sig-name descname"><span class="pre">ask_size</span></span><a class="headerlink" href="#tradingenv.events.EventNBBO.ask_size" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.events.EventNBBO.bid_price">
<span class="sig-name descname"><span class="pre">bid_price</span></span><a class="headerlink" href="#tradingenv.events.EventNBBO.bid_price" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.events.EventNBBO.bid_size">
<span class="sig-name descname"><span class="pre">bid_size</span></span><a class="headerlink" href="#tradingenv.events.EventNBBO.bid_size" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.events.EventNBBO.contract">
<span class="sig-name descname"><span class="pre">contract</span></span><a class="headerlink" href="#tradingenv.events.EventNBBO.contract" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.events.EventNBBO.time">
<span class="sig-name descname"><span class="pre">time</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">datetime</span></em><a class="headerlink" href="#tradingenv.events.EventNBBO.time" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.events.EventNewDate">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.events.</span></span><span class="sig-name descname"><span class="pre">EventNewDate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">datetime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">broker</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.broker.Broker" title="tradingenv.broker.broker.Broker"><span class="pre">Broker</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/events.html#EventNewDate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.events.EventNewDate" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tradingenv.events.IEvent" title="tradingenv.events.IEvent"><code class="xref py py-class docutils literal notranslate"><span class="pre">IEvent</span></code></a></p>
<p>Triggered just before the first event of the date is processed.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.events.EventNewObservation">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.events.</span></span><span class="sig-name descname"><span class="pre">EventNewObservation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">datetime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Mapping</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/events.html#EventNewObservation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.events.EventNewObservation" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tradingenv.events.IEvent" title="tradingenv.events.IEvent"><code class="xref py py-class docutils literal notranslate"><span class="pre">IEvent</span></code></a></p>
<p>Stores a snapshot of exogenous variables at a given time.</p>
<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.events.EventNewObservation.to_list">
<span class="sig-name descname"><span class="pre">to_list</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">&lt;Mock</span> <span class="pre">name='mock.array'</span> <span class="pre">id='129693753289632'&gt;</span></span></span><a class="reference internal" href="_modules/tradingenv/events.html#EventNewObservation.to_list"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.events.EventNewObservation.to_list" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.events.EventReset">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.events.</span></span><span class="sig-name descname"><span class="pre">EventReset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">datetime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">track_record</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.track_record.TrackRecord" title="tradingenv.broker.track_record.TrackRecord"><span class="pre">TrackRecord</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/events.html#EventReset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.events.EventReset" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tradingenv.events.IEvent" title="tradingenv.events.IEvent"><code class="xref py py-class docutils literal notranslate"><span class="pre">IEvent</span></code></a></p>
<p>IEvent signaling that TradingEnv.reset has finished to run.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.events.EventStep">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.events.</span></span><span class="sig-name descname"><span class="pre">EventStep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">datetime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">track_record</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="tradingenv.broker.html#tradingenv.broker.track_record.TrackRecord" title="tradingenv.broker.track_record.TrackRecord"><span class="pre">TrackRecord</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">action</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/events.html#EventStep"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.events.EventStep" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tradingenv.events.IEvent" title="tradingenv.events.IEvent"><code class="xref py py-class docutils literal notranslate"><span class="pre">IEvent</span></code></a></p>
<p>IEvent signaling that TradingEnv.step has finished to run.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.events.IEvent">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.events.</span></span><span class="sig-name descname"><span class="pre">IEvent</span></span><a class="reference internal" href="_modules/tradingenv/events.html#IEvent"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.events.IEvent" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>TradingEnv is an even-driven simulator where events are passed using
TradingEnv.add_event. All events must inherit this class.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.events.IEvent.time">
<span class="sig-name descname"><span class="pre">time</span></span><a class="headerlink" href="#tradingenv.events.IEvent.time" title="Link to this definition">¶</a></dt>
<dd><p>Timestamp associated with the event, i.e. when the event occurred.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>datetime</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.events.IEvent.notify">
<span class="sig-name descname"><span class="pre">notify</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">observers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#tradingenv.events.Observer" title="tradingenv.events.Observer"><span class="pre">Observer</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/events.html#IEvent.notify"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.events.IEvent.notify" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id1">
<span class="sig-name descname"><span class="pre">time</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">datetime</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#id1" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.events.Observer">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.events.</span></span><span class="sig-name descname"><span class="pre">Observer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/events.html#Observer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.events.Observer" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.events.Observer._observed_events">
<span class="sig-name descname"><span class="pre">_observed_events</span></span><a class="headerlink" href="#tradingenv.events.Observer._observed_events" title="Link to this definition">¶</a></dt>
<dd><p>A sequence of class Events.  The state of a Feature is updated
automatically by TradingEnv whenever an observed event occurs
(i.e. it is passed to TradingEnv.add_event). By default, no event
are observed.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Sequence[Type['tradingenv.events.IEvent']]</p>
</dd>
</dl>
</dd></dl>

<p class="rubric">Notes</p>
<p>Generally in the observer patterns we store the functions to be run
whenever an observed event is processed. Here we register the method id
instead, which is slightly slower and certainly less elegant. The reason
is that deepcopies of the env will introduce bucks because features will
be copied but not their callback methods from the observed_events, which
might introduce nasty bugs (e.g. when using ray).</p>
<dl class="simple">
<dt>Ideas for alternative implementations of the observer pattern:</dt><dd><p><a class="reference external" href="https://stackoverflow.com/questions/1092531/event-system-in-python">https://stackoverflow.com/questions/1092531/event-system-in-python</a></p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.events.Observer.reset">
<span class="sig-name descname"><span class="pre">reset</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/events.html#Observer.reset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.events.Observer.reset" title="Link to this definition">¶</a></dt>
<dd><p>Re-initialise from scratch, discard attributes that don't come
with the initialisation.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-tradingenv.exchange">
<span id="tradingenv-exchange-module"></span><h2>tradingenv.exchange module<a class="headerlink" href="#module-tradingenv.exchange" title="Link to this heading">¶</a></h2>
<p>Classes to store the state of the exchange, used to check buy and sell
prices. Exchange is an aggregation of LimitOrderBook.</p>
<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.exchange.Exchange">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.exchange.</span></span><span class="sig-name descname"><span class="pre">Exchange</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/exchange.html#Exchange"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.exchange.Exchange" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tradingenv.events.Observer" title="tradingenv.events.Observer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Observer</span></code></a></p>
<p>An aggregation of limit order books.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.exchange.Exchange._books">
<span class="sig-name descname"><span class="pre">_books</span></span><a class="headerlink" href="#tradingenv.exchange.Exchange._books" title="Link to this definition">¶</a></dt>
<dd><p>A dictionary mapping contract IDs to the corresponding instance of
LimitOrderBook.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dict[<a class="reference internal" href="#tradingenv.contracts.AbstractContract" title="tradingenv.contracts.AbstractContract">AbstractContract</a>, <a class="reference internal" href="#tradingenv.exchange.LimitOrderBook" title="tradingenv.exchange.LimitOrderBook">LimitOrderBook</a>]</p>
</dd>
</dl>
</dd></dl>

<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">tradingenv.exchange</span><span class="w"> </span><span class="kn">import</span> <span class="n">Exchange</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">tradingenv.events</span><span class="w"> </span><span class="kn">import</span> <span class="n">EventNBBO</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">tradingenv.contracts</span><span class="w"> </span><span class="kn">import</span> <span class="n">ETF</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exchange</span> <span class="o">=</span> <span class="n">Exchange</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Assume that there is a NBBO update for S&amp;P 500 and NASDAQ.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nbbo_sp500</span> <span class="o">=</span> <span class="n">EventNBBO</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">time</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(),</span>
<span class="gp">... </span>    <span class="n">bid_price</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">ask_price</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">bid_size</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">ask_size</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">contract</span><span class="o">=</span><span class="n">ETF</span><span class="p">(</span><span class="s1">&#39;SPY&#39;</span><span class="p">),</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nbbo_nasdaq</span> <span class="o">=</span> <span class="n">EventNBBO</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">time</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(),</span>
<span class="gp">... </span>    <span class="n">bid_price</span><span class="o">=</span><span class="mi">99</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">ask_price</span><span class="o">=</span><span class="mi">101</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">bid_size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">ask_size</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">contract</span><span class="o">=</span><span class="n">ETF</span><span class="p">(</span><span class="s1">&#39;IEF&#39;</span><span class="p">),</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exchange</span><span class="o">.</span><span class="n">process_EventNBBO</span><span class="p">(</span><span class="n">nbbo_sp500</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exchange</span><span class="o">.</span><span class="n">process_EventNBBO</span><span class="p">(</span><span class="n">nbbo_nasdaq</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exchange</span>
<span class="go">{ETF(SPY): &#39;9 : 11&#39;, ETF(IEF): &#39;99 : 101&#39;}</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.exchange.Exchange.acq_prices">
<span class="sig-name descname"><span class="pre">acq_prices</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">keys:</span> <span class="pre">~typing.Sequence[~tradingenv.contracts.AbstractContract],</span> <span class="pre">signs:</span> <span class="pre">&lt;Mock</span> <span class="pre">name='mock.ndarray'</span> <span class="pre">id='129693753432768'&gt;</span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">&lt;Mock</span> <span class="pre">name='mock.ndarray'</span> <span class="pre">id='129693753432768'&gt;</span></span></span><a class="reference internal" href="_modules/tradingenv/exchange.html#Exchange.acq_prices"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.exchange.Exchange.acq_prices" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.exchange.Exchange.ask_prices">
<span class="sig-name descname"><span class="pre">ask_prices</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keys</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#tradingenv.contracts.AbstractContract" title="tradingenv.contracts.AbstractContract"><span class="pre">AbstractContract</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">&lt;Mock</span> <span class="pre">name='mock.array'</span> <span class="pre">id='129693753289632'&gt;</span></span></span><a class="reference internal" href="_modules/tradingenv/exchange.html#Exchange.ask_prices"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.exchange.Exchange.ask_prices" title="Link to this definition">¶</a></dt>
<dd><p>Return a np.array with mid prices of the provided contract IDs.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.exchange.Exchange.bid_prices">
<span class="sig-name descname"><span class="pre">bid_prices</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keys</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#tradingenv.contracts.AbstractContract" title="tradingenv.contracts.AbstractContract"><span class="pre">AbstractContract</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">&lt;Mock</span> <span class="pre">name='mock.array'</span> <span class="pre">id='129693753289632'&gt;</span></span></span><a class="reference internal" href="_modules/tradingenv/exchange.html#Exchange.bid_prices"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.exchange.Exchange.bid_prices" title="Link to this definition">¶</a></dt>
<dd><p>Return a np.array with mid prices of the provided contract IDs.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.exchange.Exchange.liq_prices">
<span class="sig-name descname"><span class="pre">liq_prices</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">keys:</span> <span class="pre">~typing.Sequence[~tradingenv.contracts.AbstractContract],</span> <span class="pre">signs:</span> <span class="pre">&lt;Mock</span> <span class="pre">name='mock.ndarray'</span> <span class="pre">id='129693753432768'&gt;</span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">&lt;Mock</span> <span class="pre">name='mock.ndarray'</span> <span class="pre">id='129693753432768'&gt;</span></span></span><a class="reference internal" href="_modules/tradingenv/exchange.html#Exchange.liq_prices"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.exchange.Exchange.liq_prices" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.exchange.Exchange.mid_prices">
<span class="sig-name descname"><span class="pre">mid_prices</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keys</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#tradingenv.contracts.AbstractContract" title="tradingenv.contracts.AbstractContract"><span class="pre">AbstractContract</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">&lt;Mock</span> <span class="pre">name='mock.array'</span> <span class="pre">id='129693753289632'&gt;</span></span></span><a class="reference internal" href="_modules/tradingenv/exchange.html#Exchange.mid_prices"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.exchange.Exchange.mid_prices" title="Link to this definition">¶</a></dt>
<dd><p>Return a np.array with mid prices of the provided contract IDs.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.exchange.Exchange.process_EventContractDiscontinued">
<span class="sig-name descname"><span class="pre">process_EventContractDiscontinued</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#tradingenv.events.EventContractDiscontinued" title="tradingenv.events.EventContractDiscontinued"><span class="pre">EventContractDiscontinued</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/exchange.html#Exchange.process_EventContractDiscontinued"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.exchange.Exchange.process_EventContractDiscontinued" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.exchange.Exchange.process_EventNBBO">
<span class="sig-name descname"><span class="pre">process_EventNBBO</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#tradingenv.events.EventNBBO" title="tradingenv.events.EventNBBO"><span class="pre">EventNBBO</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/exchange.html#Exchange.process_EventNBBO"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.exchange.Exchange.process_EventNBBO" title="Link to this definition">¶</a></dt>
<dd><p>Process an EventNBBO, representing an update of market prices and
sizes in the limit order book.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>event</strong> (<a class="reference internal" href="#tradingenv.events.EventNBBO" title="tradingenv.events.EventNBBO"><em>EventNBBO</em></a>) -- An event instance storing prices, sizes and contract_id to be
updated.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.exchange.Exchange.spreads">
<span class="sig-name descname"><span class="pre">spreads</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keys</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#tradingenv.contracts.AbstractContract" title="tradingenv.contracts.AbstractContract"><span class="pre">AbstractContract</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">&lt;Mock</span> <span class="pre">name='mock.array'</span> <span class="pre">id='129693753289632'&gt;</span></span></span><a class="reference internal" href="_modules/tradingenv/exchange.html#Exchange.spreads"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.exchange.Exchange.spreads" title="Link to this definition">¶</a></dt>
<dd><p>Return a np.array with spreads of the provided contract IDs.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.exchange.Exchange.to_frame">
<span class="sig-name descname"><span class="pre">to_frame</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contracts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#tradingenv.contracts.AbstractContract" title="tradingenv.contracts.AbstractContract"><span class="pre">AbstractContract</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">join</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'outer'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/exchange.html#Exchange.to_frame"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.exchange.Exchange.to_frame" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.exchange.LimitOrderBook">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.exchange.</span></span><span class="sig-name descname"><span class="pre">LimitOrderBook</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bid_price:</span> <span class="pre">float</span> <span class="pre">=</span> <span class="pre">&lt;Mock</span> <span class="pre">name='mock.nan'</span> <span class="pre">id='129693753432336'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ask_price:</span> <span class="pre">float</span> <span class="pre">=</span> <span class="pre">&lt;Mock</span> <span class="pre">name='mock.nan'</span> <span class="pre">id='129693753432336'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bid_size:</span> <span class="pre">float</span> <span class="pre">=</span> <span class="pre">&lt;Mock</span> <span class="pre">name='mock.nan'</span> <span class="pre">id='129693753432336'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ask_size:</span> <span class="pre">float</span> <span class="pre">=</span> <span class="pre">&lt;Mock</span> <span class="pre">name='mock.nan'</span> <span class="pre">id='129693753432336'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time:</span> <span class="pre">~datetime.datetime</span> <span class="pre">=</span> <span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/exchange.html#LimitOrderBook"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.exchange.LimitOrderBook" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Limit order book of a single asset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bid_price</strong> (<em>float</em>) -- Latest on-screen bid transaction_price.</p></li>
<li><p><strong>ask_price</strong> (<em>float</em>) -- Latest on-screen ask transaction_price.</p></li>
<li><p><strong>bid_size</strong> (<em>float</em>) -- Latest on-screen bid size.</p></li>
<li><p><strong>ask_size</strong> (<em>float</em>) -- Latest on-screen ask size.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">tradingenv.exchange</span><span class="w"> </span><span class="kn">import</span> <span class="n">LimitOrderBook</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lob</span> <span class="o">=</span> <span class="n">LimitOrderBook</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">bid_price</span><span class="o">=</span><span class="mf">99.9</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">ask_price</span><span class="o">=</span><span class="mf">100.1</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">bid_size</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">ask_size</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lob</span>
<span class="go">99.9 : 100.1</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.exchange.LimitOrderBook.acq_price">
<span class="sig-name descname"><span class="pre">acq_price</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">quantity</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="reference internal" href="_modules/tradingenv/exchange.html#LimitOrderBook.acq_price"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.exchange.LimitOrderBook.acq_price" title="Link to this definition">¶</a></dt>
<dd><p>Returns the execution price of buying 'quantity' now.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.exchange.LimitOrderBook.liq_price">
<span class="sig-name descname"><span class="pre">liq_price</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">quantity</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="reference internal" href="_modules/tradingenv/exchange.html#LimitOrderBook.liq_price"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.exchange.LimitOrderBook.liq_price" title="Link to this definition">¶</a></dt>
<dd><p>Returns the execution price of selling 'quantity' now.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tradingenv.exchange.LimitOrderBook.mid_price">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">mid_price</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><a class="headerlink" href="#tradingenv.exchange.LimitOrderBook.mid_price" title="Link to this definition">¶</a></dt>
<dd><p>Returns the middle transaction_price between the bid and the ask.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tradingenv.exchange.LimitOrderBook.spread">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">spread</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><a class="headerlink" href="#tradingenv.exchange.LimitOrderBook.spread" title="Link to this definition">¶</a></dt>
<dd><p>Returns bid-ask spread.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.exchange.LimitOrderBook.terminate">
<span class="sig-name descname"><span class="pre">terminate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#tradingenv.events.EventContractDiscontinued" title="tradingenv.events.EventContractDiscontinued"><span class="pre">EventContractDiscontinued</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/exchange.html#LimitOrderBook.terminate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.exchange.LimitOrderBook.terminate" title="Link to this definition">¶</a></dt>
<dd><p>Reset and stop quotes in the lob but keep history.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.exchange.LimitOrderBook.to_frame">
<span class="sig-name descname"><span class="pre">to_frame</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">what</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'mid_price'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">&lt;Mock</span> <span class="pre">name='mock.Series'</span> <span class="pre">id='129693753432432'&gt;</span></span></span><a class="reference internal" href="_modules/tradingenv/exchange.html#LimitOrderBook.to_frame"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.exchange.LimitOrderBook.to_frame" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.exchange.LimitOrderBook.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#tradingenv.events.EventNBBO" title="tradingenv.events.EventNBBO"><span class="pre">EventNBBO</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/exchange.html#LimitOrderBook.update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.exchange.LimitOrderBook.update" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-tradingenv.features">
<span id="tradingenv-features-module"></span><h2>tradingenv.features module<a class="headerlink" href="#module-tradingenv.features" title="Link to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.features.Feature">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.features.</span></span><span class="sig-name descname"><span class="pre">Feature</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/features.html#Feature"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.features.Feature" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tradingenv.events.Observer" title="tradingenv.events.Observer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Observer</span></code></a></p>
<p>This class gives you the option to instance State as a collection of
features. See docstring of State for further details.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.features.Feature.exchange">
<span class="sig-name descname"><span class="pre">exchange</span></span><a class="headerlink" href="#tradingenv.features.Feature.exchange" title="Link to this definition">¶</a></dt>
<dd><p>Instance of tradingenv.exchange.Exchange, storing current and
historical asset prices.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#tradingenv.exchange.Exchange" title="tradingenv.exchange.Exchange">tradingenv.exchange.Exchange</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.features.Feature.action_space">
<span class="sig-name descname"><span class="pre">action_space</span></span><a class="headerlink" href="#tradingenv.features.Feature.action_space" title="Link to this definition">¶</a></dt>
<dd><p>Action space passed when instancing the environemtn.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tradingenv.spaces.PortfolioSpace</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.features.Feature.broker">
<span class="sig-name descname"><span class="pre">broker</span></span><a class="headerlink" href="#tradingenv.features.Feature.broker" title="Link to this definition">¶</a></dt>
<dd><p>Instance of tradingenv.broker.Broker storing current holdings,
net liquidation value, pnl, past track record, past rebalancing
requests, past trades, past commissions and more.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tradingenv.broker.Broker</p>
</dd>
</dl>
</dd></dl>

<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>space</strong> -- An optional Space needed for OpenAI-gym compatibility. Note:
only the feature before transformations (if any) will be validated
against the space.</p></li>
<li><p><strong>name</strong> -- An optional name of the feature, class name by default. It is
useful to provide a custom name to differentiate the same feature
in the state if provided more than once e.g. with different
parameters.</p></li>
<li><p><strong>save</strong> -- If True (default), the output of Feature.parse() will be
automatically saved to feature.history whenever (1) an observed
event is processed by the feature or (2) feature() is called.</p></li>
<li><p><strong>transformer</strong> -- A sklearn preprocessing transformer, defaults to None. If provided,
by default the features returned by parse will be transformed.
The easiest way to fitting transformers is to pass
fit_transformer=True when instancing TradingEnv. You can set
custom routines either by passing extending transformers or by
implementing Feature._manual_fit_transformer.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="id2">
<span class="sig-name descname"><span class="pre">action_space</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">tradingenv.spaces.PortfolioSpace</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#id2" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id3">
<span class="sig-name descname"><span class="pre">broker</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">tradingenv.broker.Broker</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#id3" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="id4">
<span class="sig-name descname"><span class="pre">exchange</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#tradingenv.exchange.Exchange" title="tradingenv.exchange.Exchange"><span class="pre">tradingenv.exchange.Exchange</span></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#id4" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.features.Feature.fit_transformer">
<span class="sig-name descname"><span class="pre">fit_transformer</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/features.html#Feature.fit_transformer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.features.Feature.fit_transformer" title="Link to this definition">¶</a></dt>
<dd><p>Fit transformed using all historical observations (batch) by default.
The user can optionally implement _manual_fit_transformer to
override the procedure.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.features.Feature.parse">
<span class="sig-name descname"><span class="pre">parse</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/features.html#Feature.parse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.features.Feature.parse" title="Link to this definition">¶</a></dt>
<dd><p>Returns any data structure representing the current value assumed
by the feature. If a 'space' is provided when instancing this Feature,
the returned value will be validated against the space if verify=True.
This method is also required if you desire to store historical values
of the feature in Feature.history whenever an observed event is
received.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.features.Feature.reset">
<span class="sig-name descname"><span class="pre">reset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exchange</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#tradingenv.exchange.Exchange" title="tradingenv.exchange.Exchange"><span class="pre">tradingenv.exchange.Exchange</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">action_space</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tradingenv.spaces.PortfolioSpace</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">broker</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tradingenv.broker.Broker</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/features.html#Feature.reset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.features.Feature.reset" title="Link to this definition">¶</a></dt>
<dd><p>Reset the feature to its original state. We pass exchange,
action_space and broker as they could be needed to compute some features
such as current positions, portfolio weights, market prices etc.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-tradingenv.library">
<span id="tradingenv-library-module"></span><h2>tradingenv.library module<a class="headerlink" href="#module-tradingenv.library" title="Link to this heading">¶</a></h2>
<dl class="simple">
<dt>Note: all transformers expect 2D arrays in feature.transformer.transform.</dt><dd><p>ValueError: Expected 2D array, got 1D array instead</p>
</dd>
<dt>Therefore, all space shapes should really be 2D and parsed history 3D. However,</dt><dd><p>'vx-term-structure-basis': mid_prices[1:] - self.exchange[Contracts.vix].mid_price,
'vx-term-structure-roll-yield': np.array([term_structure.roll_yield(0, t) for t in lifespan[:2]]),
'vx-roll-yield-30days': roll_yield_30d,
'vx-implied-sharpe-30days': implied_sharpe,
'time-since-vix-update': np.array([hours_since_vix_update]),</p>
</dd>
</dl>
<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.library.FeatureIsRTH">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.library.</span></span><span class="sig-name descname"><span class="pre">FeatureIsRTH</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/library.html#FeatureIsRTH"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.library.FeatureIsRTH" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tradingenv.features.Feature" title="tradingenv.features.Feature"><code class="xref py py-class docutils literal notranslate"><span class="pre">Feature</span></code></a></p>
<p>Boolean flag indicating weather markets is trading during Regular
Trading Hours.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>space</strong> -- An optional Space needed for OpenAI-gym compatibility. Note:
only the feature before transformations (if any) will be validated
against the space.</p></li>
<li><p><strong>name</strong> -- An optional name of the feature, class name by default. It is
useful to provide a custom name to differentiate the same feature
in the state if provided more than once e.g. with different
parameters.</p></li>
<li><p><strong>save</strong> -- If True (default), the output of Feature.parse() will be
automatically saved to feature.history whenever (1) an observed
event is processed by the feature or (2) feature() is called.</p></li>
<li><p><strong>transformer</strong> -- A sklearn preprocessing transformer, defaults to None. If provided,
by default the features returned by parse will be transformed.
The easiest way to fitting transformers is to pass
fit_transformer=True when instancing TradingEnv. You can set
custom routines either by passing extending transformers or by
implementing Feature._manual_fit_transformer.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.library.FeatureIsRTH.parse">
<span class="sig-name descname"><span class="pre">parse</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/library.html#FeatureIsRTH.parse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.library.FeatureIsRTH.parse" title="Link to this definition">¶</a></dt>
<dd><p>Parse progress bar during RTH, ETH or just a dummy indicating
weather</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.library.FeaturePortfolioWeight">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.library.</span></span><span class="sig-name descname"><span class="pre">FeaturePortfolioWeight</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/library.html#FeaturePortfolioWeight"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.library.FeaturePortfolioWeight" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tradingenv.features.Feature" title="tradingenv.features.Feature"><code class="xref py py-class docutils literal notranslate"><span class="pre">Feature</span></code></a></p>
<p>Portfolio weights of holdings.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>contracts</strong> -- A contract or sequence of contracts.</p></li>
<li><p><strong>low</strong> -- Minimum possible portfolio allocation to the contract. E.g. -1.5
for -150% (i.e. 150% short).</p></li>
<li><p><strong>high</strong> -- Minimum possible portfolio allocation to the contract. E.g. -1.5
for -150% (i.e. 150% short).</p></li>
<li><p><strong>name</strong> -- Feature name. Default is class name if omitted.</p></li>
<li><p><strong>transformer</strong> -- A class from sklearn.preprocessing.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Because gymnasium.spaces.Box forces the same low and high bounds on all
items, you'll have to instance a different PortfolioWeight for each
contract with different 'low' and 'high' allocation.</p>
<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.library.FeaturePortfolioWeight.parse">
<span class="sig-name descname"><span class="pre">parse</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/library.html#FeaturePortfolioWeight.parse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.library.FeaturePortfolioWeight.parse" title="Link to this definition">¶</a></dt>
<dd><p>Returns array of currently held weights of self.contracts in the
portfolio.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.library.FeaturePrices">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.library.</span></span><span class="sig-name descname"><span class="pre">FeaturePrices</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/library.html#FeaturePrices"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.library.FeaturePrices" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tradingenv.features.Feature" title="tradingenv.features.Feature"><code class="xref py py-class docutils literal notranslate"><span class="pre">Feature</span></code></a></p>
<p>Feature representing price data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>contracts</strong> -- A contract or sequence of contracts.</p></li>
<li><p><strong>name</strong> -- Feature name. Default is class name if omitted.</p></li>
<li><p><strong>transformer</strong> -- A class from sklearn.preprocessing.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.library.FeaturePrices.parse">
<span class="sig-name descname"><span class="pre">parse</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/library.html#FeaturePrices.parse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.library.FeaturePrices.parse" title="Link to this definition">¶</a></dt>
<dd><p>Parse sequence of prices.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.library.FeatureSpread">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.library.</span></span><span class="sig-name descname"><span class="pre">FeatureSpread</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/library.html#FeatureSpread"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.library.FeatureSpread" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tradingenv.features.Feature" title="tradingenv.features.Feature"><code class="xref py py-class docutils literal notranslate"><span class="pre">Feature</span></code></a></p>
<p>Feature representing prices spreads.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>contracts</strong> -- A contract or sequence of contracts.</p></li>
<li><p><strong>clip</strong> -- Spread (%) greater than this are clipped. By default this is
0.01 (i.e. 1%).</p></li>
<li><p><strong>name</strong> -- Feature name. Default is class name if omitted.</p></li>
<li><p><strong>transformer</strong> -- A class from sklearn.preprocessing. Note that spread can be highly
positively skewed unless clipped or log transformed if the market
data include overnight sessions, illiquid or emerging assets, in
which case you might want to log the spread or use a more
sophisticated transformer to normalise the data.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.library.FeatureSpread.parse">
<span class="sig-name descname"><span class="pre">parse</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/library.html#FeatureSpread.parse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.library.FeatureSpread.parse" title="Link to this definition">¶</a></dt>
<dd><p>Parse sequence of spreads.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tradingenv.library.listify">
<span class="sig-prename descclassname"><span class="pre">tradingenv.library.</span></span><span class="sig-name descname"><span class="pre">listify</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/library.html#listify"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.library.listify" title="Link to this definition">¶</a></dt>
<dd><p>If the item is not iterable, insert the item in a list.</p>
</dd></dl>

</section>
<section id="module-tradingenv.metrics">
<span id="tradingenv-metrics-module"></span><h2>tradingenv.metrics module<a class="headerlink" href="#module-tradingenv.metrics" title="Link to this heading">¶</a></h2>
<p>It is harder to convert returns to levels than viceversa because the former
requires to know what was the base date.</p>
<dl class="py function">
<dt class="sig sig-object py" id="tradingenv.metrics.to_pandas">
<span class="sig-prename descclassname"><span class="pre">tradingenv.metrics.</span></span><span class="sig-name descname"><span class="pre">to_pandas</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method:</span> <span class="pre">~typing.Callable</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target:</span> <span class="pre">~typing.Type</span> <span class="pre">=</span> <span class="pre">&lt;Mock</span> <span class="pre">name='mock.NDFrame'</span> <span class="pre">id='129693753438384'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/metrics.html#to_pandas"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.metrics.to_pandas" title="Link to this definition">¶</a></dt>
<dd><p>This decorator simply adds method to the signature of cls, which is
NDFrame by default.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>method</strong> (<em>Callable</em>) -- A function definition whose first argument is an instance of cls.</p></li>
<li><p><strong>target</strong> (<em>Type</em>) -- A class type. Input 'method' will be set as attribute of this 'target'
class.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>When optional arguments are passed to properties, then the first argument
('method' in this case) is None. This requires special handling, managed
by the big if-else below. The implementation has been inspired by:
<a class="reference external" href="https://stackoverflow.com/a/24617244/7677636">https://stackoverflow.com/a/24617244/7677636</a></p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">series</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># df.method()  # raises</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># series.method()  # raises</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@to_pandas</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span>
<span class="gp">... </span><span class="k">def</span><span class="w"> </span><span class="nf">method</span><span class="p">(</span><span class="n">frame</span><span class="p">:</span> <span class="n">NDFrame</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="s1">&#39;Hello!&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">method</span><span class="p">()</span>
<span class="go">&#39;Hello!&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># series.method()  # AttributeError: &#39;Series&#39; object has no attribute &#39;method&#39;</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@to_pandas</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">)</span>
<span class="gp">... </span><span class="k">def</span><span class="w"> </span><span class="nf">method</span><span class="p">(</span><span class="n">frame</span><span class="p">:</span> <span class="n">NDFrame</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="s1">&#39;Hello!&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">method</span><span class="p">()</span>
<span class="go">&#39;Hello!&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">series</span><span class="o">.</span><span class="n">method</span><span class="p">()</span>
<span class="go">&#39;Hello!&#39;</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-tradingenv.policy">
<span id="tradingenv-policy-module"></span><h2>tradingenv.policy module<a class="headerlink" href="#module-tradingenv.policy" title="Link to this heading">¶</a></h2>
<p>Logic to wrap policy passed in TradingEnv.sample_episode(policy).</p>
<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.policy.AbstractPolicy">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.policy.</span></span><span class="sig-name descname"><span class="pre">AbstractPolicy</span></span><a class="reference internal" href="_modules/tradingenv/policy.html#AbstractPolicy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.policy.AbstractPolicy" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.policy.AbstractPolicy.act">
<em class="property"><span class="k"><span class="pre">abstractmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">act</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/policy.html#AbstractPolicy.act"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.policy.AbstractPolicy.act" title="Link to this definition">¶</a></dt>
<dd><p>Returns an action which belongs to the action observation_space, so
action_space.contains(action) must return True.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.policy.AbstractPolicy.action_space">
<span class="sig-name descname"><span class="pre">action_space</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;Mock</span> <span class="pre">name='mock.PortfolioSpace'</span> <span class="pre">id='129693755128192'&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#tradingenv.policy.AbstractPolicy.action_space" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.policy.AbstractPolicy.observation_space">
<span class="sig-name descname"><span class="pre">observation_space</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;Mock</span> <span class="pre">name='mock.Space'</span> <span class="pre">id='129693753433104'&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#tradingenv.policy.AbstractPolicy.observation_space" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.policy.RandomPolicy">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.policy.</span></span><span class="sig-name descname"><span class="pre">RandomPolicy</span></span><a class="reference internal" href="_modules/tradingenv/policy.html#RandomPolicy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.policy.RandomPolicy" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tradingenv.policy.AbstractPolicy" title="tradingenv.policy.AbstractPolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractPolicy</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.policy.RandomPolicy.act">
<span class="sig-name descname"><span class="pre">act</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/policy.html#RandomPolicy.act"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.policy.RandomPolicy.act" title="Link to this definition">¶</a></dt>
<dd><p>Returns an action which belongs to the action observation_space, so
action_space.contains(action) must return True.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tradingenv.policy.make_policy">
<span class="sig-prename descclassname"><span class="pre">tradingenv.policy.</span></span><span class="sig-name descname"><span class="pre">make_policy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">policy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">action_space</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">observation_space</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#tradingenv.policy.AbstractPolicy" title="tradingenv.policy.AbstractPolicy"><span class="pre">AbstractPolicy</span></a></span></span><a class="reference internal" href="_modules/tradingenv/policy.html#make_policy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.policy.make_policy" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="module-tradingenv.rewards">
<span id="tradingenv-rewards-module"></span><h2>tradingenv.rewards module<a class="headerlink" href="#module-tradingenv.rewards" title="Link to this heading">¶</a></h2>
<p>The reward is a parameter of TradingEnv. Valid rewards must implement the
abstract class AbstractReward.</p>
<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.rewards.AbstractReward">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.rewards.</span></span><span class="sig-name descname"><span class="pre">AbstractReward</span></span><a class="reference internal" href="_modules/tradingenv/rewards.html#AbstractReward"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.rewards.AbstractReward" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></p>
<p>All custom rewards must implement this interface.</p>
<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.rewards.AbstractReward.calculate">
<em class="property"><span class="k"><span class="pre">abstractmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">calculate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tradingenv.env.TradingEnv</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="reference internal" href="_modules/tradingenv/rewards.html#AbstractReward.calculate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.rewards.AbstractReward.calculate" title="Link to this definition">¶</a></dt>
<dd><p>Return float associated with the last reward of the agent,
generally manipulating stuff from env.broker.track_record. See
implementations for examples.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.rewards.AbstractReward.reset">
<span class="sig-name descname"><span class="pre">reset</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/tradingenv/rewards.html#AbstractReward.reset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.rewards.AbstractReward.reset" title="Link to this definition">¶</a></dt>
<dd><p>Reset values of this class, if any.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.rewards.LogReturn">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.rewards.</span></span><span class="sig-name descname"><span class="pre">LogReturn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scale</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clip</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">risk_aversion</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/rewards.html#LogReturn"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.rewards.LogReturn" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tradingenv.rewards.AbstractReward" title="tradingenv.rewards.AbstractReward"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractReward</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scale</strong> -- Reward is divided by this number before being returned. This is a
helper to rescale the reward closer to a [-1, +1] range.</p></li>
<li><p><strong>clip</strong> -- Rewards larger than this clip value are truncated.</p></li>
<li><p><strong>risk_aversion</strong> -- Negative rewards are multiplied by (1 + risk_aversion). Zero by
default. Risk aversion is computed after clipping the reward.
Empirically, values around 0.1 seem to work well but optimal
values strongly depend on the use case.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>For a good reference on why reward shaping is important see [1].</p>
<p class="rubric">References</p>
<p>[1] van Hasselt, Hado P., et al. &quot;Learning values across many orders of
magnitude.&quot; Advances in neural information processing systems 29 (2016).</p>
<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.rewards.LogReturn.calculate">
<span class="sig-name descname"><span class="pre">calculate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tradingenv.env.TradingEnv</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="reference internal" href="_modules/tradingenv/rewards.html#LogReturn.calculate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.rewards.LogReturn.calculate" title="Link to this definition">¶</a></dt>
<dd><p>Return float associated with the last reward of the agent,
generally manipulating stuff from env.broker.track_record. See
implementations for examples.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.rewards.RewardDifferentialSharpeRatio">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.rewards.</span></span><span class="sig-name descname"><span class="pre">RewardDifferentialSharpeRatio</span></span><a class="reference internal" href="_modules/tradingenv/rewards.html#RewardDifferentialSharpeRatio"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.rewards.RewardDifferentialSharpeRatio" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>An elegant online Sharpe ratio which uses the second order Taylor
expansion. I still wonder how problematic this approximation might be?</p>
<p class="rubric">References</p>
<p><a class="reference external" href="http://papers.nips.cc/paper/1551-reinforcement-learning-for-trading.pdf">http://papers.nips.cc/paper/1551-reinforcement-learning-for-trading.pdf</a>
<a class="reference external" href="https://quant.stackexchange.com/questions/37969/what-s-the-derivative-of-the-sharpe-ratio-for-one-asset-trying-to-optimize-on-i">https://quant.stackexchange.com/questions/37969/what-s-the-derivative-of-the-sharpe-ratio-for-one-asset-trying-to-optimize-on-i</a>
<a class="reference external" href="https://www.reddit.com/r/algotrading/comments/9xkvby/how_to_calculate_differential_sharpe_ratio/">https://www.reddit.com/r/algotrading/comments/9xkvby/how_to_calculate_differential_sharpe_ratio/</a></p>
<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.rewards.RewardDifferentialSharpeRatio.calculate">
<span class="sig-name descname"><span class="pre">calculate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tradingenv.env.TradingEnv</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="reference internal" href="_modules/tradingenv/rewards.html#RewardDifferentialSharpeRatio.calculate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.rewards.RewardDifferentialSharpeRatio.calculate" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.rewards.RewardLogReturn">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.rewards.</span></span><span class="sig-name descname"><span class="pre">RewardLogReturn</span></span><a class="reference internal" href="_modules/tradingenv/rewards.html#RewardLogReturn"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.rewards.RewardLogReturn" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tradingenv.rewards.AbstractReward" title="tradingenv.rewards.AbstractReward"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractReward</span></code></a></p>
<p>Log change of the net liquidation value of the account at each step.</p>
<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.rewards.RewardLogReturn.calculate">
<span class="sig-name descname"><span class="pre">calculate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tradingenv.env.TradingEnv</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="reference internal" href="_modules/tradingenv/rewards.html#RewardLogReturn.calculate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.rewards.RewardLogReturn.calculate" title="Link to this definition">¶</a></dt>
<dd><p>Return float associated with the last reward of the agent,
generally manipulating stuff from env.broker.track_record. See
implementations for examples.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.rewards.RewardPnL">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.rewards.</span></span><span class="sig-name descname"><span class="pre">RewardPnL</span></span><a class="reference internal" href="_modules/tradingenv/rewards.html#RewardPnL"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.rewards.RewardPnL" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tradingenv.rewards.AbstractReward" title="tradingenv.rewards.AbstractReward"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractReward</span></code></a></p>
<p>Profit and Loss reward.</p>
<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.rewards.RewardPnL.calculate">
<span class="sig-name descname"><span class="pre">calculate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tradingenv.env.TradingEnv</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="reference internal" href="_modules/tradingenv/rewards.html#RewardPnL.calculate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.rewards.RewardPnL.calculate" title="Link to this definition">¶</a></dt>
<dd><p>Return float associated with the last reward of the agent,
generally manipulating stuff from env.broker.track_record. See
implementations for examples.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.rewards.RewardSimpleReturn">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.rewards.</span></span><span class="sig-name descname"><span class="pre">RewardSimpleReturn</span></span><a class="reference internal" href="_modules/tradingenv/rewards.html#RewardSimpleReturn"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.rewards.RewardSimpleReturn" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tradingenv.rewards.AbstractReward" title="tradingenv.rewards.AbstractReward"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractReward</span></code></a></p>
<p>Simple change of the net liquidation value of the account at each
step.</p>
<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.rewards.RewardSimpleReturn.calculate">
<span class="sig-name descname"><span class="pre">calculate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tradingenv.env.TradingEnv</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="reference internal" href="_modules/tradingenv/rewards.html#RewardSimpleReturn.calculate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.rewards.RewardSimpleReturn.calculate" title="Link to this definition">¶</a></dt>
<dd><p>Return float associated with the last reward of the agent,
generally manipulating stuff from env.broker.track_record. See
implementations for examples.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tradingenv.rewards.make_reward">
<span class="sig-prename descclassname"><span class="pre">tradingenv.rewards.</span></span><span class="sig-name descname"><span class="pre">make_reward</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reward</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#tradingenv.rewards.AbstractReward" title="tradingenv.rewards.AbstractReward"><span class="pre">AbstractReward</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/rewards.html#make_reward"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.rewards.make_reward" title="Link to this definition">¶</a></dt>
<dd><p>Valid reward are implementation of the interface AbstractReward. However,
this method allows the user to specify the reward as a string and the
corresponding id will be retrieved from tradingenv.rewards.</p>
</dd></dl>

</section>
<section id="module-tradingenv.spaces">
<span id="tradingenv-spaces-module"></span><h2>tradingenv.spaces module<a class="headerlink" href="#module-tradingenv.spaces" title="Link to this heading">¶</a></h2>
<p>Create a new <cite>Mock</cite> object. <cite>Mock</cite> takes several optional arguments
that specify the behaviour of the Mock object:</p>
<ul>
<li><p><cite>spec</cite>: This can be either a list of strings or an existing object (a
class or instance) that acts as the specification for the mock object. If
you pass in an object then a list of strings is formed by calling dir on
the object (excluding unsupported magic attributes and methods). Accessing
any attribute not in this list will raise an <cite>AttributeError</cite>.</p>
<p>If <cite>spec</cite> is an object (rather than a list of strings) then
<cite>mock.__class__</cite> returns the class of the spec object. This allows mocks
to pass <cite>isinstance</cite> tests.</p>
</li>
<li><p><cite>spec_set</cite>: A stricter variant of <cite>spec</cite>. If used, attempting to <em>set</em>
or get an attribute on the mock that isn't on the object passed as
<cite>spec_set</cite> will raise an <cite>AttributeError</cite>.</p></li>
<li><p><cite>side_effect</cite>: A function to be called whenever the Mock is called. See
the <cite>side_effect</cite> attribute. Useful for raising exceptions or
dynamically changing return values. The function is called with the same
arguments as the mock, and unless it returns <cite>DEFAULT</cite>, the return
value of this function is used as the return value.</p>
<p>If <cite>side_effect</cite> is an iterable then each call to the mock will return
the next value from the iterable. If any of the members of the iterable
are exceptions they will be raised instead of returned.</p>
</li>
<li><p><cite>return_value</cite>: The value returned when the mock is called. By default
this is a new Mock (created on first access). See the
<cite>return_value</cite> attribute.</p></li>
<li><p><cite>unsafe</cite>: By default, accessing any attribute whose name starts with
<em>assert</em>, <em>assret</em>, <em>asert</em>, <em>aseert</em>, or <em>assrt</em> raises an AttributeError.
Additionally, an AttributeError is raised when accessing
attributes that match the name of an assertion method without the prefix
<cite>assert_</cite>, e.g. accessing <cite>called_once</cite> instead of <cite>assert_called_once</cite>.
Passing <cite>unsafe=True</cite> will allow access to these attributes.</p></li>
<li><p><cite>wraps</cite>: Item for the mock object to wrap. If <cite>wraps</cite> is not None then
calling the Mock will pass the call through to the wrapped object
(returning the real result). Attribute access on the mock will return a
Mock object that wraps the corresponding attribute of the wrapped object
(so attempting to access an attribute that doesn't exist will raise an
<cite>AttributeError</cite>).</p>
<p>If the mock has an explicit <cite>return_value</cite> set then calls are not passed
to the wrapped object and the <cite>return_value</cite> is returned instead.</p>
</li>
<li><p><cite>name</cite>: If the mock has a name then it will be used in the repr of the
mock. This can be useful for debugging. The name is propagated to child
mocks.</p></li>
</ul>
<p>Mocks can also be called with arbitrary keyword arguments. These will be
used to set attributes on the mock after it is created.</p>
</section>
<section id="module-tradingenv.state">
<span id="tradingenv-state-module"></span><h2>tradingenv.state module<a class="headerlink" href="#module-tradingenv.state" title="Link to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.state.IState">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.state.</span></span><span class="sig-name descname"><span class="pre">IState</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/state.html#IState"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.state.IState" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tradingenv.events.Observer" title="tradingenv.events.Observer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Observer</span></code></a></p>
<p>An object storing the state of the environment. If you need
OpenAI-gym compatibility, you are expected to implement IState.space and
IState.parse in order to define the appropriate data structure to store
the state.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>features</strong> -- A sequence of classes implementing Feature. For small
states, you probably don't need this. If your state class is
becoming too big or if you need features transformation, a common
requirement in machine learning applications, implementing
Feature allows logic decoupling as IState will be a
collection of features. Each feature is an observer of events and
can define its own logic decoupled from the rest of the state or
other features.
Note: if you implement features, you don't have to implement any
other method of this class. You are expected to implement only
feature and their abstract methods and attributed. See tests for
examples.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.state.IState.parse">
<span class="sig-name descname"><span class="pre">parse</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/state.html#IState.parse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.state.IState.parse" title="Link to this definition">¶</a></dt>
<dd><p>Returns an object compatible with IState.space. If IState.space is
None, you don't have to worry about implementing this method as
IState() will simply return self. If features are provided, no need
to implement IState.parse.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.state.IState.reset">
<span class="sig-name descname"><span class="pre">reset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exchange</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#tradingenv.exchange.Exchange" title="tradingenv.exchange.Exchange"><span class="pre">tradingenv.exchange.Exchange</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">action_space</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tradingenv.spaces.PortfolioSpace</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">broker</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tradingenv.broker.Broker</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/state.html#IState.reset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.state.IState.reset" title="Link to this definition">¶</a></dt>
<dd><p>Reset state and features for next episode.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.state.IState.space">
<span class="sig-name descname"><span class="pre">space</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">&lt;Mock</span> <span class="pre">name='mock.Space'</span> <span class="pre">id='129693753626832'&gt;</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#tradingenv.state.IState.space" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.state.State">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.state.</span></span><span class="sig-name descname"><span class="pre">State</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/state.html#State"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.state.State" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tradingenv.state.IState" title="tradingenv.state.IState"><code class="xref py py-class docutils literal notranslate"><span class="pre">IState</span></code></a></p>
<p>This State implementation allows to specify a window of past data. Useful
when the observation is not Markovian.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>features</strong> -- Number of features or list of feature names. If int, feature names
will be 0, 1, ..., n-1.</p></li>
<li><p><strong>window</strong> -- Window size of the observations. In other words, the observation
returned by the environment in a given timestep is given by the
concatenation of as many past observations. Using a window larger
than 1 can be useful when past observation may have informational
value that is observations are not Markovian.</p></li>
<li><p><strong>max</strong> -- Maximum value of each feature. This is used to scale the state.
The state is scaled to [-<a href="#id5"><span class="problematic" id="id6">max_</span></a>, +max_]. The default value is 100,
arguably a large value. This is because we defer sanity checks to
input features to data preprocessing.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.state.State.flatten">
<span class="sig-name descname"><span class="pre">flatten</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="_modules/tradingenv/state.html#State.flatten"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.state.State.flatten" title="Link to this definition">¶</a></dt>
<dd><p>Flatten the history of past states. Can be useful to parse complex
states in tabular form for further analysis or visualisations.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.state.State.parse">
<span class="sig-name descname"><span class="pre">parse</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">&lt;Mock</span> <span class="pre">name='mock.array'</span> <span class="pre">id='129693753289632'&gt;</span></span></span><a class="reference internal" href="_modules/tradingenv/state.html#State.parse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.state.State.parse" title="Link to this definition">¶</a></dt>
<dd><p>Returns a numpy array of shape (window, n_features).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.state.State.process_EventNewObservation">
<span class="sig-name descname"><span class="pre">process_EventNewObservation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#tradingenv.events.EventNewObservation" title="tradingenv.events.EventNewObservation"><span class="pre">EventNewObservation</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/state.html#State.process_EventNewObservation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.state.State.process_EventNewObservation" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tradingenv.state.cache">
<span class="sig-prename descclassname"><span class="pre">tradingenv.state.</span></span><span class="sig-name descname"><span class="pre">cache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">callback=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_every:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">&lt;Mock</span> <span class="pre">name='mock.inf'</span> <span class="pre">id='129693758505472'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_on_start:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/state.html#cache"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.state.cache" title="Link to this definition">¶</a></dt>
<dd><p>Decorator which allows to use cached results from previous
episodes/backtests of Feature.process_&lt;Event&gt; methods to save computations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>callback</strong> -- A convenience arg all allows cache being either callable or not.</p></li>
<li><p><strong>check_every</strong> (<em>bool</em>) -- If True, every 'check_every' the cached result will not be used and
compared with the cached result. If there is basis_naive_tm1 difference, an error
will be raised, meaning that your features should probably not used
cached results. See Notes.</p></li>
<li><p><strong>check_on_start</strong> (<em>bool</em>) -- If True, cached and non-cached results will be compared when the
feature will receive its first observed event. If they are different,
an error will be raised, meaning that your features should probably
not used cached results. See Notes.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>By cached result we mean the state of the feature calculated at the same
timestep from basis_naive_tm1 previous episode. By the nature of this caching mechanism,
there is no way to use cached results when your feature is not deterministic
and in such case an error will be raised presumably at the first check,
assuming that some form of checking is performed as indicated by the
arguments of this function.</p>
</dd></dl>

</section>
<section id="module-tradingenv.transmitter">
<span id="tradingenv-transmitter-module"></span><h2>tradingenv.transmitter module<a class="headerlink" href="#module-tradingenv.transmitter" title="Link to this heading">¶</a></h2>
<p>TradingEnv must receive events in order to update its state during a
simulation. This could either be done by the client with TradingEnv.add_event
(low-level) OR by providing a AbstractTransmitter when instancing TradingEnv (
high-level, recommended).</p>
<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.transmitter.AbstractTransmitter">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.transmitter.</span></span><span class="sig-name descname"><span class="pre">AbstractTransmitter</span></span><a class="reference internal" href="_modules/tradingenv/transmitter.html#AbstractTransmitter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.transmitter.AbstractTransmitter" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></p>
<p>Implementations of this interface take care of delivering events to
the trading environment during the interaction of the agent with the
environment at pre-specified timesteps.</p>
<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.transmitter.AbstractTransmitter.add_events">
<em class="property"><span class="k"><span class="pre">abstractmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">add_events</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">events</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#tradingenv.events.IEvent" title="tradingenv.events.IEvent"><span class="pre">IEvent</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/transmitter.html#AbstractTransmitter.add_events"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.transmitter.AbstractTransmitter.add_events" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.transmitter.AsynchronousTransmitter">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.transmitter.</span></span><span class="sig-name descname"><span class="pre">AsynchronousTransmitter</span></span><a class="reference internal" href="_modules/tradingenv/transmitter.html#AsynchronousTransmitter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.transmitter.AsynchronousTransmitter" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tradingenv.transmitter.AbstractTransmitter" title="tradingenv.transmitter.AbstractTransmitter"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractTransmitter</span></code></a></p>
<p>This AbstractTransmitter does not schedule any event to the TradingEnv.
Suitable for when deploying to production your code.</p>
<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.transmitter.AsynchronousTransmitter.add_events">
<span class="sig-name descname"><span class="pre">add_events</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">events</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#tradingenv.events.IEvent" title="tradingenv.events.IEvent"><span class="pre">IEvent</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/transmitter.html#AsynchronousTransmitter.add_events"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.transmitter.AsynchronousTransmitter.add_events" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.transmitter.Folds">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.transmitter.</span></span><span class="sig-name descname"><span class="pre">Folds</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timesteps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">datetime</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_start</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_end</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test_start</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test_end</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/transmitter.html#Folds"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.transmitter.Folds" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.transmitter.Folds.as_time">
<span class="sig-name descname"><span class="pre">as_time</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/transmitter.html#Folds.as_time"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.transmitter.Folds.as_time" title="Link to this definition">¶</a></dt>
<dd><p>Returns Folds instance storing timesteps associated with the end
and start of each fold.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.transmitter.PartitionTimeRanges">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.transmitter.</span></span><span class="sig-name descname"><span class="pre">PartitionTimeRanges</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">folds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/transmitter.html#PartitionTimeRanges"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.transmitter.PartitionTimeRanges" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.transmitter.PartitionTimeRanges.verify_overlaps">
<span class="sig-name descname"><span class="pre">verify_overlaps</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/transmitter.html#PartitionTimeRanges.verify_overlaps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.transmitter.PartitionTimeRanges.verify_overlaps" title="Link to this definition">¶</a></dt>
<dd><p>Verify absence of any overlap across all time windows.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.transmitter.PartitionTimeRanges.verify_start_before_end">
<span class="sig-name descname"><span class="pre">verify_start_before_end</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/transmitter.html#PartitionTimeRanges.verify_start_before_end"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.transmitter.PartitionTimeRanges.verify_start_before_end" title="Link to this definition">¶</a></dt>
<dd><p>Verify that start &lt; end across all datasets.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tradingenv.transmitter.Transmitter">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tradingenv.transmitter.</span></span><span class="sig-name descname"><span class="pre">Transmitter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timesteps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">folds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">datetime</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">markov_reset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">warmup</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">timedelta</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/transmitter.html#Transmitter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.transmitter.Transmitter" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tradingenv.transmitter.AbstractTransmitter" title="tradingenv.transmitter.AbstractTransmitter"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractTransmitter</span></code></a></p>
<p>AbstractTransmitter takes care of sending Event(s) to TradingEnv while
interacting with the environment at specified timesteps. You want to use
this class to run a backtest in order to schedule at what time the Event(s)
(e.g. market prices or alternative data) should trigger.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.transmitter.Transmitter.events">
<span class="sig-name descname"><span class="pre">events</span></span><a class="headerlink" href="#tradingenv.transmitter.Transmitter.events" title="Link to this definition">¶</a></dt>
<dd><p>A list accumulating events to be delivered to TradingEnv during the
interaction.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[Event]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tradingenv.transmitter.Transmitter.timesteps">
<span class="sig-name descname"><span class="pre">timesteps</span></span><a class="headerlink" href="#tradingenv.transmitter.Transmitter.timesteps" title="Link to this definition">¶</a></dt>
<dd><p>A list accumulating timesteps at which to deliver events to
TradingEnv during the interaction.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="#tradingenv.events.IEvent" title="tradingenv.events.IEvent">IEvent</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timesteps</strong> (<em>Sequence</em>) -- A sequence of timestamps (e.g. datetime, date, timestamp). Starting
from the oldest timestamp, Transmitter next will send events in
batches stopping at the next timestamp (chronological order) until
when the last timestep is reached.</p></li>
<li><p><strong>folds</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Sequence</em><em>[</em><em>datetime</em><em>]</em><em>]</em>) -- A dictionary mapping fold _names (keys) to a pair (Sequence) of
timesteps defining the start and end time of the fold. If not
provided, all timesteps will belong to a single fold named
'training-set'.</p></li>
<li><p><strong>markov_reset</strong> (<em>bool</em>) -- If False (default), all events occurring before the date of the
reset will be processed to allow calculating derived data from past
information. If True, past events will not be processed. Setting
this to True will speed up the time required to reset the
environment.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">tradingenv.contracts</span><span class="w"> </span><span class="kn">import</span> <span class="n">Index</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">returns</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">data</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.001</span><span class="p">,</span> <span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="n">Index</span><span class="p">(</span><span class="s1">&#39;S&amp;P 500&#39;</span><span class="p">),</span> <span class="n">Index</span><span class="p">(</span><span class="s1">&#39;T-Bond&#39;</span><span class="p">)],</span>
<span class="gp">... </span>    <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;2019-01-01&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;B&#39;</span><span class="p">),</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prices</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">returns</span><span class="p">)</span><span class="o">.</span><span class="n">cumprod</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># All prices belong to the training-set.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">transmitter</span> <span class="o">=</span> <span class="n">Transmitter</span><span class="p">(</span><span class="n">timesteps</span><span class="o">=</span><span class="n">prices</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">transmitter</span><span class="o">.</span><span class="n">add_prices</span><span class="p">(</span><span class="n">prices</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Partition prices between training and test set.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">transmitter</span> <span class="o">=</span> <span class="n">Transmitter</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">timesteps</span><span class="o">=</span><span class="n">prices</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">folds</span><span class="o">=</span><span class="p">{</span>
<span class="gp">... </span>        <span class="s1">&#39;training-set&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2019</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2019</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)],</span>
<span class="gp">... </span>        <span class="s1">&#39;test-set&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2019</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2019</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">)],</span>
<span class="gp">... </span>    <span class="p">},</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">transmitter</span><span class="o">.</span><span class="n">add_prices</span><span class="p">(</span><span class="n">prices</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">transmitter</span><span class="o">.</span><span class="n">_create_partitions</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">transmitter</span><span class="o">.</span><span class="n">_reset</span><span class="p">(</span><span class="n">fold_name</span><span class="o">=</span><span class="s1">&#39;test-set&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Retrieve batches of events, then processed by TradingEnv.add_event</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">events_batch_0</span> <span class="o">=</span> <span class="n">transmitter</span><span class="o">.</span><span class="n">_next</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">events_batch_1</span> <span class="o">=</span> <span class="n">transmitter</span><span class="o">.</span><span class="n">_next</span><span class="p">()</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.transmitter.Transmitter.add_custom_events">
<span class="sig-name descname"><span class="pre">add_custom_events</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">data:</span> <span class="pre">&lt;Mock</span> <span class="pre">name='mock.DataFrame'</span> <span class="pre">id='129693770785152'&gt;,</span> <span class="pre">event_class:</span> <span class="pre">~typing.Type[~tradingenv.events.IEvent],</span> <span class="pre">mapping:</span> <span class="pre">~typing.Dict[str,</span> <span class="pre">str]</span> <span class="pre">=</span> <span class="pre">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tradingenv/transmitter.html#Transmitter.add_custom_events"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.transmitter.Transmitter.add_custom_events" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>pandas.DataFrame</em>) -- Every row of this pandas.DataFrame will be used to create
instance of EventType passing columns-state pairs as kwargs. The
index of the dataframe must be of type Datetime and will be used
to set Event.time.</p></li>
<li><p><strong>event_class</strong> (<em>Type</em><em>[</em><em>Event</em><em>]</em>) -- Arguments in EventType.__init__ will be searched from the columns
of the dataframe and set accordingly.</p></li>
<li><p><strong>mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) -- A dictionary mapping df column _names to attribute _names of
EventType. There is no need to provide a mapping if the columns
_names are exactly the same as the attribute _names of EventType.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">tradingenv.events</span><span class="w"> </span><span class="kn">import</span> <span class="n">IEvent</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">tradingenv.transmitter</span><span class="w"> </span><span class="kn">import</span> <span class="n">Transmitter</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">NewsSentiment</span><span class="p">(</span><span class="n">IEvent</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">headline</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">sentiment</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">headline</span> <span class="o">=</span> <span class="n">headline</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">sentiment</span> <span class="o">=</span> <span class="n">sentiment</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">data</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="p">[</span><span class="s1">&#39;This is a very good news!&#39;</span><span class="p">,</span> <span class="o">+</span><span class="mf">0.7</span><span class="p">],</span>
<span class="gp">... </span>        <span class="p">[</span><span class="s1">&#39;A kind of bad stuff has happened&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">],</span>
<span class="gp">... </span>        <span class="p">[</span><span class="s1">&#39;Neutral news&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span>    <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;headline&#39;</span><span class="p">,</span> <span class="s1">&#39;sentiment&#39;</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">index</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="n">datetime</span><span class="p">(</span><span class="mi">2019</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">datetime</span><span class="p">(</span><span class="mi">2019</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">datetime</span><span class="p">(</span><span class="mi">2019</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
<span class="gp">... </span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">transmitter</span> <span class="o">=</span> <span class="n">Transmitter</span><span class="p">(</span><span class="n">timesteps</span><span class="o">=</span><span class="n">dataset</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">transmitter</span><span class="o">.</span><span class="n">add_custom_events</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="n">NewsSentiment</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.transmitter.Transmitter.add_events">
<span class="sig-name descname"><span class="pre">add_events</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">events</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#tradingenv.events.IEvent" title="tradingenv.events.IEvent"><span class="pre">IEvent</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/tradingenv/transmitter.html#Transmitter.add_events"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.transmitter.Transmitter.add_events" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>events</strong> (<em>Iterable</em><em>[</em><a class="reference internal" href="#tradingenv.events.IEvent" title="tradingenv.events.IEvent"><em>IEvent</em></a><em>]</em>) -- Events to be send to the environment. The time at which the Event
will trigger corresponds to the first timestep greater or equal
to Event.time.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.transmitter.Transmitter.add_prices">
<span class="sig-name descname"><span class="pre">add_prices</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prices:</span> <span class="pre">&lt;Mock</span> <span class="pre">name='mock.DataFrame'</span> <span class="pre">id='129693770785152'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spread:</span> <span class="pre">float</span> <span class="pre">=</span> <span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/tradingenv/transmitter.html#Transmitter.add_prices"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.transmitter.Transmitter.add_prices" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prices</strong> (<em>pandas.DataFrame</em>) -- A pandas.DataFrame with the following characteristics:
- index: datetime objects
- columns: contract _names
- values: mid prices.
All mid prices will be mapped to EventNBBOs to be delivered while
interacting with TradingEnv. No timesteps are added.</p></li>
<li><p><strong>spread</strong> (<em>float</em>) -- Spread to be applied to mid_prices (zero by default). For example,
if spread=0.001, then there will be a 0.1% bid-ask spread
for all prices.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.transmitter.Transmitter.add_timesteps">
<span class="sig-name descname"><span class="pre">add_timesteps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timesteps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">datetime</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/tradingenv/transmitter.html#Transmitter.add_timesteps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.transmitter.Transmitter.add_timesteps" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>timesteps</strong> (<em>Iterable</em><em>[</em><em>datetime</em><em>]</em>) -- Events will be sent at the intervals specified here.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tradingenv.transmitter.Transmitter.walk_forward">
<span class="sig-name descname"><span class="pre">walk_forward</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">train_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sliding_window</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#tradingenv.transmitter.Folds" title="tradingenv.transmitter.Folds"><span class="pre">Folds</span></a></span></span><a class="reference internal" href="_modules/tradingenv/transmitter.html#Transmitter.walk_forward"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tradingenv.transmitter.Transmitter.walk_forward" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>train_size</strong> (<em>int</em>) -- Number of observations in the training folds.</p></li>
<li><p><strong>test_size</strong> (<em>int</em>) -- Number of observation in the validation folds.</p></li>
<li><p><strong>sliding_window</strong> (<em>bool</em>) -- If True (default), training folds will be computed using a sliding
window with the same number of observations. If False, an
expanding window will be used instead, so each training fold will
start from the first timestep which a monotonically increasing
number of observations.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>By design, the step size of the window is set to be 'test_size'.
Reasons are:
- if 'step'&lt;'test_size': your validation set is not using all available
information.
- if 'step'&gt;'test_size': there is the risk of look-ahead bias because
the next training fold will be validated on a portion of previously
seen validation data.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>A Folds object.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-tradingenv">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-tradingenv" title="Link to this heading">¶</a></h2>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper"><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="modules.html">tradingenv</a><ul>
      <li>Previous: <a href="modules.html" title="previous chapter">tradingenv</a></li>
      <li>Next: <a href="tradingenv.broker.html" title="next chapter">tradingenv.broker package</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">tradingenv package</a><ul>
<li><a class="reference internal" href="#subpackages">Subpackages</a></li>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-tradingenv.contracts">tradingenv.contracts module</a><ul>
<li><a class="reference internal" href="#tradingenv.contracts.AbstractContract"><code class="docutils literal notranslate"><span class="pre">AbstractContract</span></code></a><ul>
<li><a class="reference internal" href="#tradingenv.contracts.AbstractContract.now"><code class="docutils literal notranslate"><span class="pre">AbstractContract.now</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.AbstractContract.cash_requirement"><code class="docutils literal notranslate"><span class="pre">AbstractContract.cash_requirement</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.AbstractContract.make_events"><code class="docutils literal notranslate"><span class="pre">AbstractContract.make_events()</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.AbstractContract.margin_requirement"><code class="docutils literal notranslate"><span class="pre">AbstractContract.margin_requirement</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.AbstractContract.multiplier"><code class="docutils literal notranslate"><span class="pre">AbstractContract.multiplier</span></code></a></li>
<li><a class="reference internal" href="#id0"><code class="docutils literal notranslate"><span class="pre">AbstractContract.now</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.AbstractContract.size"><code class="docutils literal notranslate"><span class="pre">AbstractContract.size()</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.AbstractContract.static_hashing"><code class="docutils literal notranslate"><span class="pre">AbstractContract.static_hashing()</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.AbstractContract.symbol"><code class="docutils literal notranslate"><span class="pre">AbstractContract.symbol</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.AbstractContract.symbol_short"><code class="docutils literal notranslate"><span class="pre">AbstractContract.symbol_short</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.AbstractContract.underlyings"><code class="docutils literal notranslate"><span class="pre">AbstractContract.underlyings</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.AbstractContract.verify"><code class="docutils literal notranslate"><span class="pre">AbstractContract.verify()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#tradingenv.contracts.Asset"><code class="docutils literal notranslate"><span class="pre">Asset</span></code></a><ul>
<li><a class="reference internal" href="#tradingenv.contracts.Asset.cash_requirement"><code class="docutils literal notranslate"><span class="pre">Asset.cash_requirement</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.Asset.margin_requirement"><code class="docutils literal notranslate"><span class="pre">Asset.margin_requirement</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.Asset.multiplier"><code class="docutils literal notranslate"><span class="pre">Asset.multiplier</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.Asset.symbol"><code class="docutils literal notranslate"><span class="pre">Asset.symbol</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#tradingenv.contracts.Cash"><code class="docutils literal notranslate"><span class="pre">Cash</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.ES"><code class="docutils literal notranslate"><span class="pre">ES</span></code></a><ul>
<li><a class="reference internal" href="#tradingenv.contracts.ES.exists_since"><code class="docutils literal notranslate"><span class="pre">ES.exists_since</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.ES.freq"><code class="docutils literal notranslate"><span class="pre">ES.freq</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.ES.margin_requirement"><code class="docutils literal notranslate"><span class="pre">ES.margin_requirement</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.ES.multiplier"><code class="docutils literal notranslate"><span class="pre">ES.multiplier</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#tradingenv.contracts.ETF"><code class="docutils literal notranslate"><span class="pre">ETF</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.Future"><code class="docutils literal notranslate"><span class="pre">Future</span></code></a><ul>
<li><a class="reference internal" href="#tradingenv.contracts.Future.cash_requirement"><code class="docutils literal notranslate"><span class="pre">Future.cash_requirement</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.Future.exists_since"><code class="docutils literal notranslate"><span class="pre">Future.exists_since</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.Future.exists_until"><code class="docutils literal notranslate"><span class="pre">Future.exists_until</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.Future.freq"><code class="docutils literal notranslate"><span class="pre">Future.freq</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.Future.lifespan"><code class="docutils literal notranslate"><span class="pre">Future.lifespan()</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.Future.make_events"><code class="docutils literal notranslate"><span class="pre">Future.make_events()</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.Future.margin_requirement"><code class="docutils literal notranslate"><span class="pre">Future.margin_requirement</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.Future.month_codes"><code class="docutils literal notranslate"><span class="pre">Future.month_codes</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.Future.symbol"><code class="docutils literal notranslate"><span class="pre">Future.symbol</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.Future.symbol_short"><code class="docutils literal notranslate"><span class="pre">Future.symbol_short</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#tradingenv.contracts.FutureChain"><code class="docutils literal notranslate"><span class="pre">FutureChain</span></code></a><ul>
<li><a class="reference internal" href="#tradingenv.contracts.FutureChain.cash_requirement"><code class="docutils literal notranslate"><span class="pre">FutureChain.cash_requirement</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.FutureChain.lead_contract"><code class="docutils literal notranslate"><span class="pre">FutureChain.lead_contract()</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.FutureChain.lifespan"><code class="docutils literal notranslate"><span class="pre">FutureChain.lifespan()</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.FutureChain.make_events"><code class="docutils literal notranslate"><span class="pre">FutureChain.make_events()</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.FutureChain.margin_requirement"><code class="docutils literal notranslate"><span class="pre">FutureChain.margin_requirement</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.FutureChain.multiplier"><code class="docutils literal notranslate"><span class="pre">FutureChain.multiplier</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.FutureChain.static_hashing"><code class="docutils literal notranslate"><span class="pre">FutureChain.static_hashing()</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.FutureChain.symbol"><code class="docutils literal notranslate"><span class="pre">FutureChain.symbol</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.FutureChain.symbol_short"><code class="docutils literal notranslate"><span class="pre">FutureChain.symbol_short</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.FutureChain.underlyings"><code class="docutils literal notranslate"><span class="pre">FutureChain.underlyings</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#tradingenv.contracts.Index"><code class="docutils literal notranslate"><span class="pre">Index</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.NK"><code class="docutils literal notranslate"><span class="pre">NK</span></code></a><ul>
<li><a class="reference internal" href="#tradingenv.contracts.NK.exists_since"><code class="docutils literal notranslate"><span class="pre">NK.exists_since</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.NK.freq"><code class="docutils literal notranslate"><span class="pre">NK.freq</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.NK.margin_requirement"><code class="docutils literal notranslate"><span class="pre">NK.margin_requirement</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.NK.multiplier"><code class="docutils literal notranslate"><span class="pre">NK.multiplier</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#tradingenv.contracts.Rate"><code class="docutils literal notranslate"><span class="pre">Rate</span></code></a><ul>
<li><a class="reference internal" href="#tradingenv.contracts.Rate.cash_requirement"><code class="docutils literal notranslate"><span class="pre">Rate.cash_requirement</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.Rate.margin_requirement"><code class="docutils literal notranslate"><span class="pre">Rate.margin_requirement</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.Rate.multiplier"><code class="docutils literal notranslate"><span class="pre">Rate.multiplier</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.Rate.symbol"><code class="docutils literal notranslate"><span class="pre">Rate.symbol</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.Rate.verify"><code class="docutils literal notranslate"><span class="pre">Rate.verify()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#tradingenv.contracts.Stock"><code class="docutils literal notranslate"><span class="pre">Stock</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.VX"><code class="docutils literal notranslate"><span class="pre">VX</span></code></a><ul>
<li><a class="reference internal" href="#tradingenv.contracts.VX.exists_since"><code class="docutils literal notranslate"><span class="pre">VX.exists_since</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.VX.freq"><code class="docutils literal notranslate"><span class="pre">VX.freq</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.VX.margin_requirement"><code class="docutils literal notranslate"><span class="pre">VX.margin_requirement</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.VX.multiplier"><code class="docutils literal notranslate"><span class="pre">VX.multiplier</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#tradingenv.contracts.ZB"><code class="docutils literal notranslate"><span class="pre">ZB</span></code></a><ul>
<li><a class="reference internal" href="#tradingenv.contracts.ZB.margin_requirement"><code class="docutils literal notranslate"><span class="pre">ZB.margin_requirement</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.ZB.multiplier"><code class="docutils literal notranslate"><span class="pre">ZB.multiplier</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#tradingenv.contracts.ZF"><code class="docutils literal notranslate"><span class="pre">ZF</span></code></a><ul>
<li><a class="reference internal" href="#tradingenv.contracts.ZF.margin_requirement"><code class="docutils literal notranslate"><span class="pre">ZF.margin_requirement</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.ZF.multiplier"><code class="docutils literal notranslate"><span class="pre">ZF.multiplier</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#tradingenv.contracts.ZN"><code class="docutils literal notranslate"><span class="pre">ZN</span></code></a><ul>
<li><a class="reference internal" href="#tradingenv.contracts.ZN.margin_requirement"><code class="docutils literal notranslate"><span class="pre">ZN.margin_requirement</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.ZN.multiplier"><code class="docutils literal notranslate"><span class="pre">ZN.multiplier</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#tradingenv.contracts.ZQ"><code class="docutils literal notranslate"><span class="pre">ZQ</span></code></a><ul>
<li><a class="reference internal" href="#tradingenv.contracts.ZQ.margin_requirement"><code class="docutils literal notranslate"><span class="pre">ZQ.margin_requirement</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.ZQ.multiplier"><code class="docutils literal notranslate"><span class="pre">ZQ.multiplier</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#tradingenv.contracts.ZT"><code class="docutils literal notranslate"><span class="pre">ZT</span></code></a><ul>
<li><a class="reference internal" href="#tradingenv.contracts.ZT.margin_requirement"><code class="docutils literal notranslate"><span class="pre">ZT.margin_requirement</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.contracts.ZT.multiplier"><code class="docutils literal notranslate"><span class="pre">ZT.multiplier</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-tradingenv.env">tradingenv.env module</a></li>
<li><a class="reference internal" href="#module-tradingenv.events">tradingenv.events module</a><ul>
<li><a class="reference internal" href="#tradingenv.events.EventContractDiscontinued"><code class="docutils literal notranslate"><span class="pre">EventContractDiscontinued</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.events.EventDone"><code class="docutils literal notranslate"><span class="pre">EventDone</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.events.EventNBBO"><code class="docutils literal notranslate"><span class="pre">EventNBBO</span></code></a><ul>
<li><a class="reference internal" href="#tradingenv.events.EventNBBO.ask_price"><code class="docutils literal notranslate"><span class="pre">EventNBBO.ask_price</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.events.EventNBBO.ask_size"><code class="docutils literal notranslate"><span class="pre">EventNBBO.ask_size</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.events.EventNBBO.bid_price"><code class="docutils literal notranslate"><span class="pre">EventNBBO.bid_price</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.events.EventNBBO.bid_size"><code class="docutils literal notranslate"><span class="pre">EventNBBO.bid_size</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.events.EventNBBO.contract"><code class="docutils literal notranslate"><span class="pre">EventNBBO.contract</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.events.EventNBBO.time"><code class="docutils literal notranslate"><span class="pre">EventNBBO.time</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#tradingenv.events.EventNewDate"><code class="docutils literal notranslate"><span class="pre">EventNewDate</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.events.EventNewObservation"><code class="docutils literal notranslate"><span class="pre">EventNewObservation</span></code></a><ul>
<li><a class="reference internal" href="#tradingenv.events.EventNewObservation.to_list"><code class="docutils literal notranslate"><span class="pre">EventNewObservation.to_list()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#tradingenv.events.EventReset"><code class="docutils literal notranslate"><span class="pre">EventReset</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.events.EventStep"><code class="docutils literal notranslate"><span class="pre">EventStep</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.events.IEvent"><code class="docutils literal notranslate"><span class="pre">IEvent</span></code></a><ul>
<li><a class="reference internal" href="#tradingenv.events.IEvent.time"><code class="docutils literal notranslate"><span class="pre">IEvent.time</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.events.IEvent.notify"><code class="docutils literal notranslate"><span class="pre">IEvent.notify()</span></code></a></li>
<li><a class="reference internal" href="#id1"><code class="docutils literal notranslate"><span class="pre">IEvent.time</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#tradingenv.events.Observer"><code class="docutils literal notranslate"><span class="pre">Observer</span></code></a><ul>
<li><a class="reference internal" href="#tradingenv.events.Observer._observed_events"><code class="docutils literal notranslate"><span class="pre">Observer._observed_events</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.events.Observer.reset"><code class="docutils literal notranslate"><span class="pre">Observer.reset()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-tradingenv.exchange">tradingenv.exchange module</a><ul>
<li><a class="reference internal" href="#tradingenv.exchange.Exchange"><code class="docutils literal notranslate"><span class="pre">Exchange</span></code></a><ul>
<li><a class="reference internal" href="#tradingenv.exchange.Exchange._books"><code class="docutils literal notranslate"><span class="pre">Exchange._books</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.exchange.Exchange.acq_prices"><code class="docutils literal notranslate"><span class="pre">Exchange.acq_prices()</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.exchange.Exchange.ask_prices"><code class="docutils literal notranslate"><span class="pre">Exchange.ask_prices()</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.exchange.Exchange.bid_prices"><code class="docutils literal notranslate"><span class="pre">Exchange.bid_prices()</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.exchange.Exchange.liq_prices"><code class="docutils literal notranslate"><span class="pre">Exchange.liq_prices()</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.exchange.Exchange.mid_prices"><code class="docutils literal notranslate"><span class="pre">Exchange.mid_prices()</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.exchange.Exchange.process_EventContractDiscontinued"><code class="docutils literal notranslate"><span class="pre">Exchange.process_EventContractDiscontinued()</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.exchange.Exchange.process_EventNBBO"><code class="docutils literal notranslate"><span class="pre">Exchange.process_EventNBBO()</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.exchange.Exchange.spreads"><code class="docutils literal notranslate"><span class="pre">Exchange.spreads()</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.exchange.Exchange.to_frame"><code class="docutils literal notranslate"><span class="pre">Exchange.to_frame()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#tradingenv.exchange.LimitOrderBook"><code class="docutils literal notranslate"><span class="pre">LimitOrderBook</span></code></a><ul>
<li><a class="reference internal" href="#tradingenv.exchange.LimitOrderBook.acq_price"><code class="docutils literal notranslate"><span class="pre">LimitOrderBook.acq_price()</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.exchange.LimitOrderBook.liq_price"><code class="docutils literal notranslate"><span class="pre">LimitOrderBook.liq_price()</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.exchange.LimitOrderBook.mid_price"><code class="docutils literal notranslate"><span class="pre">LimitOrderBook.mid_price</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.exchange.LimitOrderBook.spread"><code class="docutils literal notranslate"><span class="pre">LimitOrderBook.spread</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.exchange.LimitOrderBook.terminate"><code class="docutils literal notranslate"><span class="pre">LimitOrderBook.terminate()</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.exchange.LimitOrderBook.to_frame"><code class="docutils literal notranslate"><span class="pre">LimitOrderBook.to_frame()</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.exchange.LimitOrderBook.update"><code class="docutils literal notranslate"><span class="pre">LimitOrderBook.update()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-tradingenv.features">tradingenv.features module</a><ul>
<li><a class="reference internal" href="#tradingenv.features.Feature"><code class="docutils literal notranslate"><span class="pre">Feature</span></code></a><ul>
<li><a class="reference internal" href="#tradingenv.features.Feature.exchange"><code class="docutils literal notranslate"><span class="pre">Feature.exchange</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.features.Feature.action_space"><code class="docutils literal notranslate"><span class="pre">Feature.action_space</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.features.Feature.broker"><code class="docutils literal notranslate"><span class="pre">Feature.broker</span></code></a></li>
<li><a class="reference internal" href="#id2"><code class="docutils literal notranslate"><span class="pre">Feature.action_space</span></code></a></li>
<li><a class="reference internal" href="#id3"><code class="docutils literal notranslate"><span class="pre">Feature.broker</span></code></a></li>
<li><a class="reference internal" href="#id4"><code class="docutils literal notranslate"><span class="pre">Feature.exchange</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.features.Feature.fit_transformer"><code class="docutils literal notranslate"><span class="pre">Feature.fit_transformer()</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.features.Feature.parse"><code class="docutils literal notranslate"><span class="pre">Feature.parse()</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.features.Feature.reset"><code class="docutils literal notranslate"><span class="pre">Feature.reset()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-tradingenv.library">tradingenv.library module</a><ul>
<li><a class="reference internal" href="#tradingenv.library.FeatureIsRTH"><code class="docutils literal notranslate"><span class="pre">FeatureIsRTH</span></code></a><ul>
<li><a class="reference internal" href="#tradingenv.library.FeatureIsRTH.parse"><code class="docutils literal notranslate"><span class="pre">FeatureIsRTH.parse()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#tradingenv.library.FeaturePortfolioWeight"><code class="docutils literal notranslate"><span class="pre">FeaturePortfolioWeight</span></code></a><ul>
<li><a class="reference internal" href="#tradingenv.library.FeaturePortfolioWeight.parse"><code class="docutils literal notranslate"><span class="pre">FeaturePortfolioWeight.parse()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#tradingenv.library.FeaturePrices"><code class="docutils literal notranslate"><span class="pre">FeaturePrices</span></code></a><ul>
<li><a class="reference internal" href="#tradingenv.library.FeaturePrices.parse"><code class="docutils literal notranslate"><span class="pre">FeaturePrices.parse()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#tradingenv.library.FeatureSpread"><code class="docutils literal notranslate"><span class="pre">FeatureSpread</span></code></a><ul>
<li><a class="reference internal" href="#tradingenv.library.FeatureSpread.parse"><code class="docutils literal notranslate"><span class="pre">FeatureSpread.parse()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#tradingenv.library.listify"><code class="docutils literal notranslate"><span class="pre">listify()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-tradingenv.metrics">tradingenv.metrics module</a><ul>
<li><a class="reference internal" href="#tradingenv.metrics.to_pandas"><code class="docutils literal notranslate"><span class="pre">to_pandas()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-tradingenv.policy">tradingenv.policy module</a><ul>
<li><a class="reference internal" href="#tradingenv.policy.AbstractPolicy"><code class="docutils literal notranslate"><span class="pre">AbstractPolicy</span></code></a><ul>
<li><a class="reference internal" href="#tradingenv.policy.AbstractPolicy.act"><code class="docutils literal notranslate"><span class="pre">AbstractPolicy.act()</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.policy.AbstractPolicy.action_space"><code class="docutils literal notranslate"><span class="pre">AbstractPolicy.action_space</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.policy.AbstractPolicy.observation_space"><code class="docutils literal notranslate"><span class="pre">AbstractPolicy.observation_space</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#tradingenv.policy.RandomPolicy"><code class="docutils literal notranslate"><span class="pre">RandomPolicy</span></code></a><ul>
<li><a class="reference internal" href="#tradingenv.policy.RandomPolicy.act"><code class="docutils literal notranslate"><span class="pre">RandomPolicy.act()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#tradingenv.policy.make_policy"><code class="docutils literal notranslate"><span class="pre">make_policy()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-tradingenv.rewards">tradingenv.rewards module</a><ul>
<li><a class="reference internal" href="#tradingenv.rewards.AbstractReward"><code class="docutils literal notranslate"><span class="pre">AbstractReward</span></code></a><ul>
<li><a class="reference internal" href="#tradingenv.rewards.AbstractReward.calculate"><code class="docutils literal notranslate"><span class="pre">AbstractReward.calculate()</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.rewards.AbstractReward.reset"><code class="docutils literal notranslate"><span class="pre">AbstractReward.reset()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#tradingenv.rewards.LogReturn"><code class="docutils literal notranslate"><span class="pre">LogReturn</span></code></a><ul>
<li><a class="reference internal" href="#tradingenv.rewards.LogReturn.calculate"><code class="docutils literal notranslate"><span class="pre">LogReturn.calculate()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#tradingenv.rewards.RewardDifferentialSharpeRatio"><code class="docutils literal notranslate"><span class="pre">RewardDifferentialSharpeRatio</span></code></a><ul>
<li><a class="reference internal" href="#tradingenv.rewards.RewardDifferentialSharpeRatio.calculate"><code class="docutils literal notranslate"><span class="pre">RewardDifferentialSharpeRatio.calculate()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#tradingenv.rewards.RewardLogReturn"><code class="docutils literal notranslate"><span class="pre">RewardLogReturn</span></code></a><ul>
<li><a class="reference internal" href="#tradingenv.rewards.RewardLogReturn.calculate"><code class="docutils literal notranslate"><span class="pre">RewardLogReturn.calculate()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#tradingenv.rewards.RewardPnL"><code class="docutils literal notranslate"><span class="pre">RewardPnL</span></code></a><ul>
<li><a class="reference internal" href="#tradingenv.rewards.RewardPnL.calculate"><code class="docutils literal notranslate"><span class="pre">RewardPnL.calculate()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#tradingenv.rewards.RewardSimpleReturn"><code class="docutils literal notranslate"><span class="pre">RewardSimpleReturn</span></code></a><ul>
<li><a class="reference internal" href="#tradingenv.rewards.RewardSimpleReturn.calculate"><code class="docutils literal notranslate"><span class="pre">RewardSimpleReturn.calculate()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#tradingenv.rewards.make_reward"><code class="docutils literal notranslate"><span class="pre">make_reward()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-tradingenv.spaces">tradingenv.spaces module</a></li>
<li><a class="reference internal" href="#module-tradingenv.state">tradingenv.state module</a><ul>
<li><a class="reference internal" href="#tradingenv.state.IState"><code class="docutils literal notranslate"><span class="pre">IState</span></code></a><ul>
<li><a class="reference internal" href="#tradingenv.state.IState.parse"><code class="docutils literal notranslate"><span class="pre">IState.parse()</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.state.IState.reset"><code class="docutils literal notranslate"><span class="pre">IState.reset()</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.state.IState.space"><code class="docutils literal notranslate"><span class="pre">IState.space</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#tradingenv.state.State"><code class="docutils literal notranslate"><span class="pre">State</span></code></a><ul>
<li><a class="reference internal" href="#tradingenv.state.State.flatten"><code class="docutils literal notranslate"><span class="pre">State.flatten()</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.state.State.parse"><code class="docutils literal notranslate"><span class="pre">State.parse()</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.state.State.process_EventNewObservation"><code class="docutils literal notranslate"><span class="pre">State.process_EventNewObservation()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#tradingenv.state.cache"><code class="docutils literal notranslate"><span class="pre">cache()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-tradingenv.transmitter">tradingenv.transmitter module</a><ul>
<li><a class="reference internal" href="#tradingenv.transmitter.AbstractTransmitter"><code class="docutils literal notranslate"><span class="pre">AbstractTransmitter</span></code></a><ul>
<li><a class="reference internal" href="#tradingenv.transmitter.AbstractTransmitter.add_events"><code class="docutils literal notranslate"><span class="pre">AbstractTransmitter.add_events()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#tradingenv.transmitter.AsynchronousTransmitter"><code class="docutils literal notranslate"><span class="pre">AsynchronousTransmitter</span></code></a><ul>
<li><a class="reference internal" href="#tradingenv.transmitter.AsynchronousTransmitter.add_events"><code class="docutils literal notranslate"><span class="pre">AsynchronousTransmitter.add_events()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#tradingenv.transmitter.Folds"><code class="docutils literal notranslate"><span class="pre">Folds</span></code></a><ul>
<li><a class="reference internal" href="#tradingenv.transmitter.Folds.as_time"><code class="docutils literal notranslate"><span class="pre">Folds.as_time()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#tradingenv.transmitter.PartitionTimeRanges"><code class="docutils literal notranslate"><span class="pre">PartitionTimeRanges</span></code></a><ul>
<li><a class="reference internal" href="#tradingenv.transmitter.PartitionTimeRanges.verify_overlaps"><code class="docutils literal notranslate"><span class="pre">PartitionTimeRanges.verify_overlaps()</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.transmitter.PartitionTimeRanges.verify_start_before_end"><code class="docutils literal notranslate"><span class="pre">PartitionTimeRanges.verify_start_before_end()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#tradingenv.transmitter.Transmitter"><code class="docutils literal notranslate"><span class="pre">Transmitter</span></code></a><ul>
<li><a class="reference internal" href="#tradingenv.transmitter.Transmitter.events"><code class="docutils literal notranslate"><span class="pre">Transmitter.events</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.transmitter.Transmitter.timesteps"><code class="docutils literal notranslate"><span class="pre">Transmitter.timesteps</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.transmitter.Transmitter.add_custom_events"><code class="docutils literal notranslate"><span class="pre">Transmitter.add_custom_events()</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.transmitter.Transmitter.add_events"><code class="docutils literal notranslate"><span class="pre">Transmitter.add_events()</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.transmitter.Transmitter.add_prices"><code class="docutils literal notranslate"><span class="pre">Transmitter.add_prices()</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.transmitter.Transmitter.add_timesteps"><code class="docutils literal notranslate"><span class="pre">Transmitter.add_timesteps()</span></code></a></li>
<li><a class="reference internal" href="#tradingenv.transmitter.Transmitter.walk_forward"><code class="docutils literal notranslate"><span class="pre">Transmitter.walk_forward()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-tradingenv">Module contents</a></li>
</ul>
</li>
</ul>

  </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2023, Federico Fontana.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="_sources/tradingenv.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>